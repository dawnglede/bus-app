(this["webpackJsonpbus-app"]=this["webpackJsonpbus-app"]||[]).push([[0],{26:function(n,t,e){},27:function(n,t,e){},34:function(n,t,e){"use strict";e.r(t);var i,o,a,r,c,p,s,d,x,u,b,l,h,j,g,f,m,O,w,A,F,y,B,D,v,N=e(0),S=e.n(N),C=e(17),k=e.n(C),I=(e(26),e(5)),R=(e(27),e(2)),U=e(3),E=Object(U.a)(i||(i=Object(R.a)(["\nhtml, body, div, span, applet, object, iframe,\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\na, abbr, acronym, address, big, cite, code,\ndel, dfn, em, img, ins, kbd, q, s, samp,\nsmall, strike, strong, sub, sup, tt, var,\nb, u, i, center,\ndl, dt, dd, ol, ul, li,\nfieldset, form, label, legend,\ntable, caption, tbody, tfoot, thead, tr, th, td,\narticle, aside, canvas, details, embed, \nfigure, figcaption, footer, header, hgroup, \nmenu, nav, output, ruby, section, summary,\ntime, mark, audio, video {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\tfont-size: 100%;\n\tfont: inherit;\n\tvertical-align: baseline;\n    box-sizing: border-box;\n}\n/* HTML5 display-role reset for older browsers */\narticle, aside, details, figcaption, figure, \nfooter, header, hgroup, menu, nav, section {\n\tdisplay: block;\n}\nbody {\n\tline-height: 1;\n}\nol, ul {\n\tlist-style: none;\n}\nblockquote, q {\n\tquotes: none;\n}\nblockquote:before, blockquote:after,\nq:before, q:after {\n\tcontent: '';\n\tcontent: none;\n}\ntable {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n}\n"]))),T=Object(U.a)(o||(o=Object(R.a)(["\nhtml {\n    box-sizing: border-box;\n}\n"]))),z="@media only screen and (min-width: 768px)",M="@media only screen and (min-width: 1440px)",Z=U.b.nav(a||(a=Object(R.a)(["\n    background-color: #FFFFFF;\n    width: 100%; \n    position: relative;\n    top: 0;\n    height: 80px;\n    overflow: hidden;\n\n    .link {\n        width: 104px;\n        height: 38px;\n    }\n"]))),Y=U.b.div(r||(r=Object(R.a)(["\n    position: absolute;\n    top: 20px;\n    left: 30px;\n\n    "," {\n        left: 150px;\n    }\n"])),M),q=U.b.div(c||(c=Object(R.a)(["\n    width: 104px;\n    height: 38px;\n    font-size: 20px;\n    color: #FFFFFF;\n    background: #6B00FF;\n    border-radius: 100px;\n    position: absolute;\n    top: 21px;\n    right: 30px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    "," {\n        right: 150px;\n    }\n"])),M),Q=(U.b.button(p||(p=Object(R.a)(["\n    position: absolute;\n    top: 20px;\n    right: 30px;\n    border: none;\n    background: transparent;\n"]))),U.b.div(s||(s=Object(R.a)(["\n    position: relative;\n    top: 80px;\n    width: 411px;\n    height: 284px;\n    background-color: #6B00FF;\n    border-radius: 0 0 16px 16px;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center; \n    row-gap: 52px;\n    z-index: 5;\n\n    \n    a {\n        text-align: center;\n        color: #FFFFFF;\n        text-decoration: none;\n        display: block;\n        font-size: 28px;\n    }\n\n    div {\n        position: absolute;\n        width: 395px;\n        height: 0;\n        border-bottom: 1px solid #00C2BA;\n        postion: absolute;\n    }\n    \n    .first-border {\n        top: 98px;\n    }\n\n    .second-border {\n        bottom: 88px;\n    }\n"]))),e.p+"static/media/Logo.5d5cbc0e.svg"),W=(e.p,e.p+"static/media/searchicon.e1e77232.svg"),G=e(8),V=e(1),H=function(){var n=Object(N.useState)(!0),t=Object(I.a)(n,2);t[0],t[1];return Object(V.jsxs)(Z,{id:"navBar",className:"navbar",children:[Object(V.jsx)(Y,{children:Object(V.jsx)("img",{src:Q,alt:"logo"})}),Object(V.jsx)(G.b,{to:"/",className:"link",children:Object(V.jsxs)(q,{children:[Object(V.jsx)("img",{src:W,alt:"searchbus"}),"\u627e\u516c\u8eca"]})})]})},J=U.b.div(d||(d=Object(R.a)(["\n  max-width: 411px;\n  margin: 0 auto;\n  margin-bottom: 30px;\n   \n  img {\n    width: 100%;\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    z-index: -999;\n  }\n\n  "," {\n    max-width: 768px;\n  }\n\n  "," {\n    max-width: 1200px;\n  }\n\n"])),z,M),K=U.b.div(x||(x=Object(R.a)(["\n\n  h1 {\n      color: #6B00FF;\n      font-size: 36px;\n      font-weight: 700;\n      text-align: center;\n      margin: 30px 0 20px 0;\n  }\n\n  "," {\n    h1 {\n      margin: 60px 0 30px 0;\n    }\n  }\n \n\n"])),z),P=U.b.div(u||(u=Object(R.a)(["\n   width: 379px;\n   height: 208px;\n   background-color: #FFFFFF;\n   margin: 0 auto;\n   border-radius: 16px;\n   box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\n   postition: relative;\n   \n   "," {\n    width: 500px;\n\n   }\n"])),z),X=U.b.form(b||(b=Object(R.a)(['\n  \n  padding-top: 16px;\n  \n  input[type="radio"] { \n    display: none;\n    \n  }\n\n  .searchRoute {\n    padding-left: 93.5px;\n  }\n\n  .searchStop {\n    padding-left: 40px;\n  }\n\n  label {\n    color: #6B00FF;\n    font-weight: 700;\n  }\n\n  span {\n    box-sizing: content-box;\n    padding-left: 8px;\n    \n  }\n\n  input[type="radio"] + label span {\n    width: 24px;\n    height: 24px;\n    display: inline-block;\n    vertical-align:middle;\n    background: url(',') no-repeat;\n\n  }\n\n  input[type="radio"]:checked + label span {\n    background: url(',')  no-repeat;\n  }\n\n  input[type="text"] {\n    width: 293px;\n    height: 51px;\n    position: absolute;\n    border-radius: 16px;\n    border: 1px solid #E0E0E0;\n    background-color: #F2F2F2;\n    padding-left: 58px;\n    color: #5B4E6E;\n    font-size: 16px;\n    font-weight: 700;\n  }\n  .search {\n    position: absolute;\n    left: 16px;\n    bottom: 20px;\n    color: #6B00FF;\n    font-weight: 700;\n    z-index: 4;\n  } \n\n  ',' {\n\n    .searchRoute {\n      padding-left: 150px;\n    }\n\n    input[type="text"] {\n      width: 414px;\n    }\n  }\n'])),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHnSURBVHgBtZbrbcIwFIWd8OYHygKIZIK2G9AJ6AZtN+gGwAZ0gtINygRNJygbxGWBWPzg/eg5loNQCoFCciQT4sD5cq/ta1vihIIgaFqW9YivTTTHNGrItt1uB57nfSR5WAnmLzBvFwoFB03k83mRy+UE+gSMxXq91m0+n4vVaiXR32k0Gu9nQWDu4g9vMG5WKhVtfkqbzUaMx2NefbzAMyKTRyEG8Alzl4D/ajKZiNlsJgG63wdZewAHgO9LAQdAdwAp9tl7zzulUukqAFWtVkW5XHZt225HfToSpgmDGtRqNYGH4lpxYiilOEZMm68dOYsYQRoA4yeQFfq19D0/pJShA6UFoRhNGIYKV8/mYuNaSBNAMRoMARfuLbztm7QBkbjG4N2gu5MVxPi62bjHYZhmPywLWcj4KkYiUeBEFmIBRcqGhAxxw6km0hQBeHlVr9e/bNYXTLc+6o1IUyY7ep/RA4/cDQhJKxpGMZ1O6dfdQVhfcOmxgqYhA+hF5X43hRFNF7uc5A+uEV90sVhI+kV9OwjHhpsNIBeDYpuW+gMxIGlAPks1c3uOlsul3n4B8OO7IpV0kHgyBwm3WCzqQ0T8IMEZhNToqWoOEq+HvI5CIo1Goxby+4Cvt6ZRyjQf4D7XQpLHLxhiIfvZxMg1AAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK+SURBVHgBtVY7bNNQFL2248RRpZCOIKVJuoEEFMoIUhAjRe1Qpg6UoQMswEYnYKJjmMpGkaBTByoFJiSCYKQQUcHYpBnaMSZD4iROwj2P51cnkF8jjvTk3/M5795377E1GoB8Pp/SNO0Wn6Z4ROUAchjtdns7mUy+6ceh9SG/z+SPTNOM8qBAIECGYRDfIyamZrMpRq1WI9d1C3z/cTwefzmUCJMn+IUXTJwKh8OCfBBarRaVy2Ucs7yA2xxZoaeIFPjA5AkIjIpKpUKO4xRY6KpfSPMJRFngW7eAY2v0ZTNAPzMmHe7q5PzSyDrRppNnWzS7VOfh9hK6wEJ2t0jasqx7ExMT6oW9TwZt3QlTqdhz62hyqkWL6w5NX2l2CPFepXmPHigRpIk3NR+JREjXdTFx55VJW3ctGhY316t0UUaFwrBtG3uEtGUFI6oIKfIESvs6ZVZDNAoyDy1+70/EqMBQKAS+eVzrcs4CytTD+6dBkftRUOX5SK0HLJojWsZe62g29II/iq+bJh0He58NtThEw1uAxp1hbv28JwAc7Oo0Dn5kDHWOHmPuOBijfpHDMUVKxaP3JW9iPMYhoXOZ7cMWPExOtWkcoEk9SF4bkRTY4NSDM3MujYNT546aEgbKKctBJMcXNhoICLNlTF9u0nEwu9RQmYAAL96OxWIfdfgLl9sG+42avPjcEf40CjD/2mpNXcvsiO+M2HjO3TZEvGjgR3NrtVE06Maa0xFFtVoF3xMlAn/hQxrGRr7QV95WBhYCFrTyrqJ8C5ACac/uB1o9sPPaZBcI0MF3Q1k9Nvj0dZcuMbk/tX2tXgr9l49WRzPiASZwuFlYNXI7DBqNhvj8skC2W+CvSPzgqJblj0QiGAyKn4juHwlUUL1eF6UqfySe/YtroJ8Xi8V5rr4FPp2RA7DlyLLwBnqhH8dvWUR66K+/URcAAAAASUVORK5CYII=",z),L=U.b.select(l||(l=Object(R.a)(["\n   appearance:none;\n   -moz-appearance:none;\n   -webkit-appearance:none;\n   width: 355px;\n   height: 55px;\n   border-radius: 16px;\n   border: 1px solid #E0E0E0;\n   margin: 20px 12px;\n   color: #5B4E6E;\n   font-size: 16px;\n   font-weight: 700;\n   padding-left: 58px;\n   background: url(",") no-repeat scroll right center transparent;\n   background-color: #F2F2F2;\n   position: relative;\n\n   ","{\n     width: 476px;\n   }\n   \n"])),"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAICAYAAADN5B7xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgBhZDRDYMwDERf0kU6QjfoKvSvrboD7Q7lG7EBmyAmYBTjQ4CCCOJ+7PjeWUnA9cSunOiN3VSjN+UFhg/2PYLlBejExgi9hgZlLqSZvGm7s/FPaH3wyIVS2FWIDckdCz/U6r3+lgULXBGa2ds8bA0lWuFdIBPawIfSF76we84bAQidMVYMZpQvAAAAAElFTkSuQmCC",z),_=U.b.div(h||(h=Object(R.a)(["\n    position: absolute;\n    top: 40px;\n    left: 28px;\n    color: #6B00FF;\n    font-weight: 700;\n    z-index: 4;\n"]))),$=U.b.div(j||(j=Object(R.a)(["\n  width: 476px;\n  height: 56px;\n  margin-left: 12px;\n  position: relative;\n"]))),nn=U.b.div(g||(g=Object(R.a)(["\n  position: relative;\n"]))),tn=(e.p,e.p+"static/media/searchBus-lg.664475c0.png"),en=U.b.div(f||(f=Object(R.a)(["\n  width: 379px;\n  margin: 30px auto 0 auto;\n  padding: 16px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(242, 242, 242, 0.8);\n  backdrop-filter: blur(5px);\n  border-radius: 16px;\n  flex-wrap: wrap; \n  gap: 20px 16px;\n  position: relative;\n\n  .link {\n    width: 92%;\n    height: 90px;\n  }\n  \n  "," {\n    width: 648px;\n\n    .link{\n      width: 300px;\n    }\n  }\n\n  "," {\n    width: 1140px;\n\n    .link {\n      width: 358.67px;\n    }\n  }\n\n"])),z,M),on=U.b.div(m||(m=Object(R.a)(["\n  width: 100%;\n  height: 90px;\n  border-radius: 16px;\n  background-color: #6B00FF;\n  cursor: pointer;\n  padding: 16px;\n  position: relative;\n  \n\n  &:hover {\n    box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\n  }\n\n"]))),an=U.b.p(O||(O=Object(R.a)(["\n  width: 100%;\n  color: #FFFFFF;\n  font-size: 16px;\n  font-weight: bold;\n  display: inline-block;\n  \n  "," {\n    font-size: 20px\n  }\n\n"])),z),rn=U.b.div(w||(w=Object(R.a)(["\n  width: 58px;\n  height: 20px;\n  background: #42EDF0;\n  border-radius: 20px;\n  color: #6B00FF;\n  font-size: 14px;\n  text-align: center;\n  vertical-align: center;\n  padding: 3px;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n\n"]))),cn=U.b.p(A||(A=Object(R.a)(["\n  color: #FFCC00;\n  font-size: 14px;\n  margin-top: 7px;\n  font-weight: 500px;\n  position: absolute;\n  bottom: 16px;\n\n  "," {\n    font-size: 16px;\n  }\n"])),z),pn=function(n){var t=n.busRouteData,e=n.twCityName,i=n.setRouteUID,o=n.setRoundName,a=function(n){return function(){i(n.RouteUID),o({depart:n.DepartureStopNameZh,destination:n.DestinationStopNameZh})}};return Object(V.jsx)(en,{children:t.map((function(n){return Object(V.jsx)(G.b,{to:"/busroute/".concat(n.RouteName.Zh_tw),className:"link",children:Object(V.jsxs)(on,{onClick:a(n),children:[Object(V.jsx)(an,{children:n.RouteName.Zh_tw.length<15?n.RouteName.Zh_tw:n.RouteName.Zh_tw.slice(0,14)+"..."}),Object(V.jsx)(rn,{children:e}),Object(V.jsxs)(cn,{children:[n.DepartureStopNameZh," \u2194 ",n.DestinationStopNameZh]})]})})}))})},sn=U.b.div(F||(F=Object(R.a)(["\n  width: 379px;\n  margin: 30px auto 0 auto;\n  padding: 16px 0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: rgba(242, 242, 242, 0.8);\n  backdrop-filter: blur(5px);\n  border-radius: 16px;\n  flex-wrap: wrap; \n  gap: 20px 16px;\n  position: relative;\n\n  .link {\n    width: 92%;\n    height: 90px;\n  }\n  \n  "," {\n    width: 648px;\n\n    .link{\n      width: 300px;\n    }\n  }\n\n  "," {\n    width: 1140px;\n\n    .link {\n      width: 358.67px;\n    }\n  }\n\n"])),z,M),dn=U.b.div(y||(y=Object(R.a)(["\n  width: 100%;\n  height: 90px;\n  border-radius: 16px;\n  background-color: #6B00FF;\n  cursor: pointer;\n  padding: 16px;\n  position: relative;\n  \n\n  &:hover {\n    box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\n  }\n\n"]))),xn=U.b.p(B||(B=Object(R.a)(["\n  width: 100%;\n  color: #FFFFFF;\n  font-size: 16px;\n  font-weight: bold;\n  display: inline-block;\n  \n  "," {\n    font-size: 20px\n  }\n\n"])),z),un=U.b.div(D||(D=Object(R.a)(["\n  width: 58px;\n  height: 20px;\n  background: #42EDF0;\n  border-radius: 20px;\n  color: #6B00FF;\n  font-size: 14px;\n  text-align: center;\n  vertical-align: center;\n  padding: 3px;\n  position: absolute;\n  top: 16px;\n  right: 16px;\n\n"]))),bn=U.b.p(v||(v=Object(R.a)(["\n  color: #FFCC00;\n  font-size: 14px;\n  margin-top: 7px;\n  font-weight: 500px;\n  position: absolute;\n  bottom: 16px;\n\n  "," {\n    font-size: 16px;\n  }\n"])),z),ln=function(n){var t=n.busStopData,e=n.twCityName,i=n.setStopUID;return Object(V.jsx)(sn,{children:t.map((function(n){return Object(V.jsx)(G.b,{to:"/busstop/".concat(n.StopName.Zh_tw),className:"link",children:Object(V.jsxs)(dn,{onClick:function(){return i(n.StopUID)},children:[Object(V.jsx)(xn,{children:n.StopName.Zh_tw.length<15?n.StopName.Zh_tw:n.StopName.Zh_tw.slice(0,14)+"..."}),Object(V.jsx)(un,{children:e}),Object(V.jsx)(bn,{children:n.StopAddress})]})})}))})},hn=[{city:"\u57fa\u9686\u5e02",enCityName:"Keelung"},{city:"\u65b0\u5317\u5e02",enCityName:"NewTaipei"},{city:"\u81fa\u5317\u5e02",enCityName:"Taipei"},{city:"\u6843\u5712\u5e02",enCityName:"Taoyuan"},{city:"\u65b0\u7af9\u5e02",enCityName:"Hsinchu"},{city:"\u65b0\u7af9\u7e23",enCityName:"HsinchuCounty"},{city:"\u82d7\u6817\u7e23",enCityName:"MiaoliCounty"},{city:"\u53f0\u4e2d\u5e02",enCityName:"Taichung"},{city:"\u5f70\u5316\u7e23",enCityName:"ChanghuaCounty"},{city:"\u5357\u6295\u7e23",enCityName:"NantouCounty"},{city:"\u96f2\u6797\u7e23",enCityName:"YunlinCounty"},{city:"\u5609\u7fa9\u5e02",enCityName:"Chiayi"},{city:"\u5609\u7fa9\u7e23",enCityName:"ChiayiCounty"},{city:"\u53f0\u5357\u5e02",enCityName:"Tainan"},{city:"\u9ad8\u96c4\u5e02",enCityName:"Kaohsiung"},{city:"\u5c4f\u6771\u7e23",enCityName:"PingtungCounty"},{city:"\u53f0\u6771\u7e23",enCityName:"TaitungCounty"},{city:"\u82b1\u84ee\u7e23",enCityName:"HualienCounty"},{city:"\u6f8e\u6e56\u7e23",enCityName:"PenghuCounty"},{city:"\u91d1\u9580\u7e23",enCityName:"KinmenCounty"},{city:"\u9023\u6c5f\u7e23",enCityName:"LienchiangCounty"}];var jn=function(n,t,e){for(var i=[],o=function(o){i.push(n[o].RouteUID),i.push(n[o].Stops);var a=i.flat(),r=a.findIndex((function(n){return n.StopUID==="".concat(t)})),c=e.findIndex((function(n){return n===a[0]}));r>-1&&-1===c?(e.push(a[0]),i=[]):i=[]},a=0;a<n.length;a++)o(a);return e},gn=e(21);var fn,mn,On,wn,An,Fn,yn,Bn,Dn,vn,Nn,Sn,Cn,kn,In,Rn,Un,En,Tn,zn,Mn,Zn,Yn,qn,Qn,Wn,Gn,Vn,Hn,Jn=function(){var n=(new Date).toGMTString(),t=new gn.a("SHA-1","TEXT");return t.setHMACKey("zWYkCVgJ4RhIOW3JMUUorOh2T_U","TEXT"),t.update("x-date: "+n),{Authorization:'hmac username="8169cb31a9d144a29702b83c1647652d", algorithm="hmac-sha1", headers="x-date", signature="'+t.getHMAC("B64")+'"',"X-Date":n}},Kn=function(n){var t=n.setTwCityName,e=n.twCityName,i=n.cityName,o=n.setCityName,a=n.setRouteUID,r=n.routeUID,c=n.setRoundName,p=n.setStopUID,s=Object(N.useState)("searchRoute"),d=Object(I.a)(s,2),x=d[0],u=d[1],b=Object(N.useState)(""),l=Object(I.a)(b,2),h=l[0],j=l[1],g=Object(N.useState)(""),f=Object(I.a)(g,2),m=f[0],O=f[1],w=Object(N.useState)(!0),A=Object(I.a)(w,2),F=(A[0],A[1]),y=Object(N.useState)([]),B=Object(I.a)(y,2),D=B[0],v=B[1],S=Object(N.useState)([]),C=Object(I.a)(S,2),k=C[0],R=C[1];function U(){var n=document.forms.SearchForm.elements.search;u(n.value)}var E="https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/".concat(i,"/").concat(h,"?%24top=24&%24format=JSON"),T="https://ptx.transportdata.tw/MOTC/v2/Bus/Stop/City/".concat(i,"?%24filter=contains(StopName%2FZh_tw%2C%20'").concat(m,"')&%24top=24&%24format=JSON");return Object(N.useEffect)((function(){0!==h.length&&0!==m&&("searchRoute"===x?fetch(E,{headers:Jn()}).then((function(n){if(n.ok)return F(!0),n.json();if(n.status>400)return F(!1),[];throw new Error("Request failed!")}),(function(n){console.log(n.message)})).then((function(n){return v(n)})):fetch(T,{headers:Jn()}).then((function(n){return n.json()})).then((function(n){console.log(n),R(n)})))}),[i,h,x]),Object(V.jsxs)(J,{id:"SearchBusContainer",children:[Object(V.jsxs)(K,{children:[Object(V.jsx)("h1",{children:"\u627e\u516c\u8eca"}),Object(V.jsx)(P,{children:Object(V.jsxs)(X,{id:"SearchForm",children:[Object(V.jsx)("input",{type:"radio",id:"searchRoute",name:"search",value:"searchRoute",onChange:U,defaultChecked:!0}),Object(V.jsxs)("label",{htmlFor:"searchRoute",className:"searchRoute",children:[Object(V.jsx)("span",{}),"\u67e5\u8def\u7dda"]}),Object(V.jsx)("input",{type:"radio",id:"searchStop",name:"search",value:"searchStop",className:"searchStop",onChange:U}),Object(V.jsxs)("label",{htmlFor:"searchStop",className:"searchStop",children:[Object(V.jsx)("span",{}),"\u67e5\u7ad9\u724c"]}),Object(V.jsx)("br",{}),Object(V.jsxs)(nn,{children:[Object(V.jsx)(_,{children:"\u7e23\u5e02"}),Object(V.jsxs)(L,{id:"selectCity",onChange:function(){var n=document.getElementById("selectCity"),e=n.options[n.selectedIndex].text;t(e),o(n.value)},children:[Object(V.jsx)("option",{value:"",children:"\u9078\u53d6\u7e23\u5e02"}),hn.map((function(n){return Object(V.jsx)("option",{value:n.enCityName,children:n.city})}))]})]}),Object(V.jsxs)($,{children:[Object(V.jsx)("div",{className:"search",children:"\u641c\u5c0b"}),Object(V.jsx)("label",{htmlFor:"searchText"}),Object(V.jsx)("input",{type:"text",id:"searchText",name:"searchText",onChange:function(n){n.preventDefault();var t=n.target.value,e=encodeURIComponent(t);j(t),O(e)}})]})]})})]}),"searchRoute"===x?Object(V.jsx)(pn,{busRouteData:D,twCityName:e,setRouteUID:a,routeUID:r,setRoundName:c}):Object(V.jsx)(ln,{busStopData:k,twCityName:e,setRouteUID:a,setStopUID:p}),Object(V.jsx)("img",{src:tn,alt:"background"})]})},Pn=(U.b.div(fn||(fn=Object(R.a)(["\n    margin: 30px 0;\n    text-align: center;\n"]))),e(6)),Xn=e.n(Pn),Ln=e(9),_n=e(10),$n=U.b.div(mn||(mn=Object(R.a)(["\n    max-width: 411px;\n    margin: 0 auto;\n    \n    "," {\n        max-width: 768px;\n    }\n"])),z),nt=U.b.div(On||(On=Object(R.a)(["\n    width: 411px;\n    \n    "," {\n        width: 768px;\n    }\n\n"])),z),tt=U.b.div(wn||(wn=Object(R.a)(["\n    width: 100%;\n    border-radius: 0px 0px 16px 16px;\n    background: #6B00FF;\n    height: 96px;\n    padding: 16px 0 16px 30px;\n    position: absolute;\n    top: 80px;\n    left: 0;\n    \n    "," {\n        padding-left: 7%;\n        height: 114px;\n    }\n\n    "," {\n        padding-left: 26%;\n    }\n"])),z,M),et=U.b.div(An||(An=Object(R.a)(["\n    background: #42EDF0;\n    border-radius: 20px;\n    font-size: 14px;\n    width: 58px;\n    height: 20px;\n    color: #6B00FF;\n    font-weight: bold;\n    text-align: center;\n    padding-top: 3px;\n"]))),it=U.b.h2(Fn||(Fn=Object(R.a)(["\n    font-size: 28px;\n    color: #FFFFFF;\n    font-weight: bold;\n    position: absolute;\n    bottom: 16px;\n    \n    "," {\n        font-size: 36px;\n        bottom: 25px;\n    }\n\n"])),z),ot=U.b.div(yn||(yn=Object(R.a)(["\n    margin-top: 144px;\n    display: flex;\n    justify-content: space-around;\n    align-items: center;\n    position: relative;\n\n    .lower-right {\n        border: 2px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 15px;\n        height: 0px;\n        transform: rotate(-45deg);\n        position: absolute;\n        left: 206px;  \n        top: 230px;\n    }\n\n    .upper-right {\n        border: 2px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 15px;\n        height: 0px;\n        transform: rotate(45deg);\n        position: absolute;\n        left: 206px;  \n        top: 218px;\n    }\n    \n    .unclick {\n        background-color: #E0E0E0;\n        color: #5B4E6E;\n    }\n\n    .clicked {\n       background-color: #6B00FF;\n       color: #FFFFFF;\n    }\n    \n"]))),at=U.b.button(Bn||(Bn=Object(R.a)(["\n    border: none;\n    width: 158.5px;\n    height: 40px;\n    border-radius: 16px;\n    text-align: center;\n    font-size: 16px;\n    \n    line-height: 40px;\n    font-weight: bold;\n    margin: 0 16px;\n    cursor: pointer;\n\n    \n\n    "," {\n        width: 323px;\n        height: 46px;\n        line-height: 46px;\n        font-size: 20px;\n        margin: 0 16px 0 30px;\n    }\n"])),z),rt=Object(U.b)(at)(Dn||(Dn=Object(R.a)(["\n\n    "," { \n        margin: 0 30px 0 16px;\n    }\n"])),z),ct=U.b.div(vn||(vn=Object(R.a)(["\n    border: 1.5px solid #BDBDBD;\n    background: #BDBDBD;\n    width: 30px;\n    height: 0px;\n    position: relative;\n\n    .lower-right {\n        border: 1.5px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 13px;\n        height: 0px;\n        transform: rotate(-45deg);\n        position: absolute;\n        left: 19px;  \n        top: 3px;\n    }\n\n    .upper-right {\n        border: 1.5px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 13px;\n        height: 0px;\n        transform: rotate(45deg);\n        position: absolute;\n        left: 19px;  \n        top: -5px;\n    }\n\n    .lower-left {\n        border: 1.5px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 13px;\n        height: 0px;\n        transform: rotate(228deg);\n        position: absolute;\n        left: -6px;  \n        top: 3px;\n    }\n\n    .upper-left {\n        border: 1.5px solid #BDBDBD;\n        border-radius: 2px;\n        background: #BDBDBD;\n        width: 13px;\n        height: 0px;\n        transform: rotate(135deg);\n        position: absolute;\n        left: -6px;  \n        top: -5px;\n    }\n    \n"]))),pt=U.b.div(Nn||(Nn=Object(R.a)(["\n    margin-top: 30px;\n    display:flex;\n    justify-content: center;\n    flex-wrap: wrap;\n"]))),st=U.b.div(Sn||(Sn=Object(R.a)(["\n    width: 349px;\n    height: 68px;\n    background: #FFFFFF;\n    border-radius: 16px;\n    padding: 20px 8px;\n    position: relative;\n    margin-bottom: 12px;\n\n    "," {\n        width: 678px;\n        height: 72px;\n    }\n"])),z),dt=U.b.div(Cn||(Cn=Object(R.a)(["\n    width: 72px;\n    height: 28px;\n    background: ",";\n    border-radius: 16px;\n    color: #FFFFFF;\n    font-size: 14px;\n    display: inline-block;\n    text-align: center;\n    line-height: 28px;\n\n    "," {\n        width: 80px;\n        height: 32px;\n        line-height: 32px;\n        font-size: 16px;\n    }\n"])),(function(n){return n.background}),z),xt=U.b.div(kn||(kn=Object(R.a)(["\n    color: #5B4E6E;\n    font-size: 16px;\n    font-weight: 700;\n    display: inline-block;\n    vertical-align: middle;\n    margin-left: 8px;\n\n    "," {\n        font-size: 20px;\n    }\n"])),z),ut=U.b.div(In||(In=Object(R.a)(["\n    width: 30px;\n    height: 24px;\n    font-size: 12px;\n    background: #F2F2F2;\n    border-radius: 16px;\n    color: #BDBDBD;\n    position: absolute;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    top: 20px;\n    right: 8px;\n\n    "," {\n        font-size: 14px;\n        top: 22px;\n    }\n"])),z),bt=(U.b.div(Rn||(Rn=Object(R.a)(["\n    width: 80px;\n    height: 28px;\n    background: #6B00FF;\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n    border-radius: 16px;\n    font-size: 14px;\n    line-height: 28px;\n    text-align: end;\n    padding: 1px 8px 0 8px;\n    color: #FFFFFF;\n    position: absolute;\n    top: 20px;\n    right: 48px;\n\n    "," {\n        width: 86px;\n        height: 32px;\n        font-size: 16px;\n        line-height: 28px;\n    }\n"])),z),U.b.img(Un||(Un=Object(R.a)(["\n    position: absolute;\n    left: 9px;\n    top: 7px;\n\n    "," {\n        top: 8px;\n    }\n"])),z),e(4)),lt=function(n){var t=n.twCityName,e=n.cityName,i=n.routeUID,o=n.roundName,a=Object(bt.g)().routeTitle,r=Object(N.useState)(""),c=Object(I.a)(r,2),p=(c[0],c[1],Object(N.useState)(!0)),s=Object(I.a)(p,2),d=s[0],x=s[1],u=function(){x(!d)},b=Object(N.useState)([]),l=Object(I.a)(b,2),h=l[0],j=l[1],g=Object(N.useState)([]),f=Object(I.a)(g,2),m=f[0],O=f[1],w="https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/".concat(e,"?%24filter=contains(RouteUID%2C%20'").concat(i,"')&%24format=JSON"),A=function(){var n=Object(_n.a)(Xn.a.mark((function n(){var t,e,o,a,r;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(w,{headers:Jn()});case 2:return t=n.sent,n.next=5,t.json();case 5:e=n.sent,j([]),O([]),r=e.filter((function(n){return n.RouteUID===i&&0===n.StopStatus})),console.log("routeData",r),(o=r.filter((function(n){return 0===n.Direction})))&&o.map((function(n){return j((function(t){return[].concat(Object(Ln.a)(t),[{stopUID:n.StopUID,stopStatus:n.StopStatus,estimateTime:n.EstimateTime}])}))})),(a=r.filter((function(n){return 1===n.Direction})))&&a.map((function(n){return O((function(t){return[].concat(Object(Ln.a)(t),[{stopUID:n.StopUID,stopStatus:n.StopStatus,estimateTime:n.EstimateTime}])}))})),console.log("busDeparture",o),console.log("busReturn",a);case 16:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),F=Object(N.useState)([]),y=Object(I.a)(F,2),B=y[0],D=y[1],v=Object(N.useState)([]),S=Object(I.a)(v,2),C=S[0],k=S[1],R="https://ptx.transportdata.tw/MOTC/v2/Bus/StopOfRoute/City/".concat(e,"?%24filter=contains(RouteUID%2C%20'").concat(i,"')&%24top=30&%24format=JSON"),U=function(){var n=Object(_n.a)(Xn.a.mark((function n(){var t,e;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(R,{headers:Jn()});case 2:return t=n.sent,n.next=5,t.json();case 5:e=n.sent,[],[],e.filter((function(n){return 0===n.Direction}))[0].Stops.map((function(n){return D((function(t){return[].concat(Object(Ln.a)(t),[{stopSequence:n.StopSequence,stopName:n.StopName.Zh_tw,stopUID:n.StopUID}])}))})),e.filter((function(n){return 1===n.Direction}))[0].Stops.map((function(n){return k((function(t){return[].concat(Object(Ln.a)(t),[{stopSequence:n.StopSequence,stopName:n.StopName.Zh_tw,stopUID:n.StopUID}])}))}));case 12:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),E=function(n,t){var e=t.filter((function(t){return t.stopUID===n}));return console.log(t),0===e.length?Object(V.jsx)(dt,{background:"#BDBDBD",children:"\u672a\u767c\u8eca"}):e.map((function(n){var t=Math.round(n.estimateTime/60);return 0===n.stopStatus&&t>3?Object(V.jsxs)(dt,{background:"#00C2BA",children:[t,"\u5206"]}):0===n.stopStatus&&t<=3?Object(V.jsx)(dt,{background:"#EB5757",children:"\u9032\u7ad9\u4e2d"}):Object(V.jsx)(dt,{background:"#BDBDBD",children:"\u672a\u767c\u8eca"})}))};return Object(N.useEffect)((function(){A();var n=setInterval(A,4e4);return U(),function(){clearInterval(n)}}),[]),Object(V.jsxs)($n,{children:[Object(V.jsx)(tt,{children:Object(V.jsxs)(nt,{children:[Object(V.jsx)(et,{children:t}),Object(V.jsx)(it,{children:a})]})}),Object(V.jsxs)(ot,{children:[Object(V.jsx)(at,{onClick:u,className:d?"clicked":"unclick",children:o.depart}),Object(V.jsxs)(ct,{children:[Object(V.jsx)("i",{className:"upper-left"}),Object(V.jsx)("i",{className:"lower-left"}),Object(V.jsx)("i",{className:"upper-right"}),Object(V.jsx)("i",{className:"lower-right"})]}),Object(V.jsx)(rt,{onClick:u,className:d?"unclick":"clicked",children:o.destination})]}),d?Object(V.jsx)(ht,{departStopName:B,isBusCome:E,estimateDepart:h}):Object(V.jsx)(jt,{returnStopName:C,estimateReturn:m,isBusCome:E})]})},ht=function(n){var t=n.departStopName,e=n.estimateDepart,i=n.isBusCome;return Object(V.jsx)(pt,{children:t.map((function(n){return Object(V.jsxs)(st,{children:[e!==[]?i(n.stopUID,e):Object(V.jsx)(dt,{background:"#BDBDBD",children:"\u672b\u73ed\u99db\u96e2"}),Object(V.jsx)(xt,{children:n.stopName}),Object(V.jsx)(ut,{children:n.stopSequence})]})}))})},jt=function(n){var t=n.returnStopName,e=n.estimateReturn,i=n.isBusCome;return Object(V.jsx)(pt,{children:t.map((function(n){return Object(V.jsxs)(st,{children:[e!==[]?i(n.stopUID,e):Object(V.jsx)(dt,{background:"#BDBDBD",children:"\u672b\u73ed\u99db\u96e2"}),Object(V.jsx)(xt,{children:n.stopName}),Object(V.jsx)(ut,{children:n.stopSequence})]})}))})},gt=U.b.div(En||(En=Object(R.a)(["\n    max-width: 411px;\n    margin: 0 auto;\n    \n    "," {\n        max-width: 768px;\n    }\n"])),z),ft=U.b.div(Tn||(Tn=Object(R.a)(["\n    width: 100%;\n    border-radius: 0px 0px 16px 16px;\n    background: #6B00FF;\n    height: 96px;\n    padding: 16px 0 16px 30px;\n    position: absolute;\n    top: 80px;\n    left: 0;\n    \n    "," {\n        padding-left:7%;\n        height: 114px;\n    }\n\n    "," {\n        padding-left: 26%;\n    }\n"])),z,M),mt=U.b.div(zn||(zn=Object(R.a)(["\n    background: #42EDF0;\n    border-radius: 20px;\n    font-size: 14px;\n    width: 58px;\n    height: 20px;\n    color: #6B00FF;\n    font-weight: bold;\n    text-align: center;\n    padding-top: 3px;\n"]))),Ot=U.b.h2(Mn||(Mn=Object(R.a)(["\n    font-size: 28px;\n    color: #FFFFFF;\n    font-weight: bold;\n    position: absolute;\n    bottom: 16px;\n    \n    "," {\n        font-size: 36px;\n        bottom: 25px;\n    }\n\n"])),z),wt=U.b.div(Zn||(Zn=Object(R.a)(["\n    margin-top: 30px;\n    display:flex;\n    justify-content: center;\n    flex-wrap: wrap;\n    margin-top: 126px;\n"]))),At=U.b.div(Yn||(Yn=Object(R.a)(["\n    width: 349px;\n    height: 68px;\n    background: #FFFFFF;\n    border-radius: 16px;\n    padding: 20px 8px;\n    position: relative;\n    margin-bottom: 12px;\n    display: flex;\n    align-items: center;\n\n    "," {\n        width: 678px;\n        height: 72px;\n    }\n"])),z),Ft=U.b.div(qn||(qn=Object(R.a)(["\n    width: 72px;\n    height: 28px;\n    background: ",";\n    border-radius: 16px;\n    color: #FFFFFF;\n    font-size: 14px;\n    display: inline-block;\n    text-align: center;\n    line-height: 28px;\n\n    "," {\n        width: 80px;\n        height: 32px;\n        line-height: 32px;\n        font-size: 16px;\n    }\n"])),(function(n){return n.background}),z),yt=U.b.div(Qn||(Qn=Object(R.a)(["\n    color: #5B4E6E;\n    font-size: 16px;\n    font-weight: 700;\n    margin-left: 8px;\n\n    "," {\n        font-size: 20px;\n    }\n"])),z),Bt=U.b.span(Wn||(Wn=Object(R.a)(["\n        margin-left: 8px;\n        font-size: 14px;\n        color: #5B4E6E;\n\n        "," {\n            font-size: 16px;\n\n        }\n"])),z),Dt=(U.b.div(Gn||(Gn=Object(R.a)(["\n    width: 30px;\n    height: 24px;\n    font-size: 12px;\n    background: #F2F2F2;\n    border-radius: 16px;\n    color: #BDBDBD;\n    position: absolute;\n    text-align: center;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    top: 20px;\n    right: 8px;\n\n    "," {\n        font-size: 14px;\n        top: 22px;\n    }\n"])),z),U.b.div(Vn||(Vn=Object(R.a)(["\n    width: 80px;\n    height: 28px;\n    background: #6B00FF;\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\n    border-radius: 16px;\n    font-size: 14px;\n    line-height: 28px;\n    text-align: end;\n    padding: 1px 8px 0 8px;\n    color: #FFFFFF;\n    position: absolute;\n    top: 20px;\n    right: 48px;\n\n    "," {\n        width: 86px;\n        height: 32px;\n        font-size: 16px;\n        line-height: 28px;\n    }\n"])),z),U.b.img(Hn||(Hn=Object(R.a)(["\n    position: absolute;\n    left: 9px;\n    top: 7px;\n\n    "," {\n        top: 8px;\n    }\n"])),z),function(n){var t=n.twCityName,e=n.cityName,i=(n.roundName,n.stopUID),o=Object(bt.g)().routeTitle,a=[],r=Object(N.useState)([]),c=Object(I.a)(r,2),p=c[0],s=c[1],d=function(){var n=Object(_n.a)(Xn.a.mark((function n(){var t,o,a;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t="https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/".concat(e,"?%24filter=contains(StopUID%2C'").concat(i,"')&%24top=30&%24format=JSON"),n.next=3,fetch(t,{headers:Jn()});case 3:return o=n.sent,n.next=6,o.json();case 6:a=n.sent,s([]),s((function(n){return[].concat(Object(Ln.a)(n),[{routeUID:a.RouteUID,direction:a.Direction,stopStatus:a.StopStatus,estimateTime:a.EstimateTime}])}));case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),x="https://ptx.transportdata.tw/MOTC/v2/Bus/StopOfRoute/City/".concat(e,"?%24select=RouteUID%2CRouteName%2CStops&%24format=JSON"),u=function(){var n=Object(_n.a)(Xn.a.mark((function n(){var t,e;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch(x,{headers:Jn()});case 2:return t=n.sent,n.next=5,t.json();case 5:e=n.sent,jn(e,i,a),console.log(a),g();case 9:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),b=Object(N.useState)([]),l=Object(I.a)(b,2),h=l[0],j=l[1],g=function(){var n=Object(_n.a)(Xn.a.mark((function n(){var t,i;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=Xn.a.mark((function n(t){var i,o,r;return Xn.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i="https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/".concat(e,"?%24filter=contains(RouteUID%2C%20'").concat(a[t],"')&%24top=30&%24format=JSON"),n.next=3,fetch(i);case 3:return o=n.sent,n.next=6,o.json();case 6:r=n.sent,j((function(n){return[].concat(Object(Ln.a)(n),[{routeUID:r[0].RouteUID,routeName:r[0].RouteName.Zh_tw,departureStopNameZh:r[0].DepartureStopNameZh,destinationStopNameZh:r[0].DestinationStopNameZh}])}));case 8:case"end":return n.stop()}}),n)})),i=0;case 2:if(!(i<a.length)){n.next=7;break}return n.delegateYield(t(i),"t0",4);case 4:i++,n.next=2;break;case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),f=function(n){var t=p.filter((function(t){return t.routeUID===n}));return 0===t.length?Object(V.jsx)(Ft,{background:"#BDBDBD",children:"\u672a\u767c\u8eca"}):t.map((function(n){var t=Math.round(n.estimateTime/60);return 0===n.stopStatus&&t>3?Object(V.jsxs)(Ft,{background:"#00C2BA",children:[t,"\u5206"]}):0===n.stopStatus&&t<=3?Object(V.jsx)(Ft,{background:"#EB5757",children:"\u9032\u7ad9\u4e2d"}):Object(V.jsx)(Ft,{background:"#BDBDBD",children:"\u672a\u767c\u8eca"})}))};return Object(N.useEffect)((function(){u(),d()}),[]),Object(V.jsxs)(gt,{children:[Object(V.jsxs)(ft,{children:[Object(V.jsx)(mt,{children:t}),Object(V.jsx)(Ot,{children:o})]}),Object(V.jsx)(wt,{children:h.map((function(n){return Object(V.jsxs)(At,{children:[p!==[]?f(n.routeUID):Object(V.jsx)(Ft,{background:"#BDBDBD",children:"\u672b\u73ed\u99db\u96e2"}),Object(V.jsxs)(yt,{children:[n.routeName,Object(V.jsxs)(Bt,{children:[">",n.destinationStopNameZh]})]})]})}))})]})});var vt=function(){var n=Object(N.useState)(""),t=Object(I.a)(n,2),e=t[0],i=t[1],o=Object(N.useState)(""),a=Object(I.a)(o,2),r=a[0],c=a[1],p=Object(N.useState)(""),s=Object(I.a)(p,2),d=s[0],x=s[1],u=Object(N.useState)([]),b=Object(I.a)(u,2),l=b[0],h=b[1],j=Object(N.useState)(""),g=Object(I.a)(j,2),f=g[0],m=g[1];return Object(V.jsx)("div",{children:Object(V.jsxs)(G.a,{children:[Object(V.jsx)(E,{}),Object(V.jsx)(T,{}),Object(V.jsx)(H,{}),Object(V.jsxs)(bt.c,{children:[Object(V.jsx)(bt.a,{exact:!0,path:"/",element:Object(V.jsx)(Kn,{routeUID:d,cityName:r,setCityName:c,twCityName:e,setTwCityName:i,setRouteUID:x,setRoundName:h,setStopUID:m})}),Object(V.jsx)(bt.a,{exact:!0,path:"/busroute/:routeTitle",element:Object(V.jsx)(lt,{twCityName:e,cityName:r,routeUID:d,roundName:l})}),Object(V.jsx)(bt.a,{exact:!0,path:"/busstop/:routeTitle",element:Object(V.jsx)(Dt,{twCityName:e,cityName:r,stopUID:f})})]})]})})},Nt=function(n){n&&n instanceof Function&&e.e(3).then(e.bind(null,35)).then((function(t){var e=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;e(n),i(n),o(n),a(n),r(n)}))};k.a.render(Object(V.jsx)(S.a.StrictMode,{children:Object(V.jsx)(vt,{})}),document.getElementById("root")),Nt()}},[[34,1,2]]]);
//# sourceMappingURL=main.cbae6049.chunk.js.map