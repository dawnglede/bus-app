{"version":3,"sources":["components/globalstyle.js","constants/breakpoint.js","components/NavBar/style.js","assets/Logo.svg","assets/searchicon.svg","assets/menu.svg","components/NavBar/NavBar.js","components/FindBus/style.js","assets/radio-unchecked.png","assets/radio-checked.png","assets/searchBus-lg.png","components/BusCard/style.js","components/BusCard/BusCard.js","components/StopBusCard/style.js","components/StopBusCard/StopBusCard.js","constants/utils.js","BusApi/busApi.js","BusApi/apiKey.js","components/FindBus/FindBus.js","assets/arrow.png","components/RealTimeBusInfo/style.js","components/RealTimeBusInfo/RealTimeBusInfo.js","assets/bus-icon.png","components/RealTimeStopInfo/style.js","components/RealTimeStopInfo/RealTimeStopInfo.js","App.js","reportWebVitals.js","index.js"],"names":["ResetStyle","createGlobalStyle","GlobalStyle","MEDIA_MD","MEDIA_LG","NavBarStyle","styled","nav","Logo","div","FindBusIcon","button","NavBar","useState","id","className","src","logo","alt","to","searchIcon","SearchBusContainer","SearchBus","SearchBox","SearchForm","form","SelectCity","select","CityName","SearchInputContainer","SelectCityContainer","BusCardContainer","Card","RouteName","p","City","Destination","BusCard","busRouteData","twCityName","setRouteUID","setRoundName","handleClick","busRoute","RouteUID","depart","DepartureStopNameZh","destination","DestinationStopNameZh","map","Zh_tw","onClick","length","slice","StopBusCard","busStopData","setStopUID","busStop","StopName","StopUID","StopAddress","location","city","enCityName","getRouteUID","data","stopUID","routeId","stopInfo","i","push","Stops","stopInfoFlat","flat","sameStopId","findIndex","item","repeatInfo","getAuthorizationHeader","GMTString","Date","toGMTString","ShaObj","jsSHA","setHMACKey","update","getHMAC","FindBus","setTwCityName","cityName","setCityName","routeUID","searchMethod","setSearchMethod","routeName","setRouteName","stopName","setStopName","setBusRouteData","setBusStopData","handleRadioChange","checkedRadio","document","forms","elements","value","routeUrl","stopUrl","useEffect","fetch","headers","then","res","ok","json","status","Error","e","console","log","message","jsonRes","type","name","onChange","defaultChecked","htmlFor","getElementById","text","options","selectedIndex","preventDefault","target","encode","encodeURIComponent","isDataLoad","backgroundLg","BusInfoContaienr","TopBarContainer","TopBar","h2","Departure","Terminal","Arrow","StopCard","ArrivalTime","props","background","StopOrder","fontcolor","Plate","BusIcon","img","RealTimeBusInfo","roundName","routeTitle","useParams","isDeparture","setIsDeparture","changeColor","estimateDepart","setEstimateDepart","estimateReturn","setEstimateReturn","estimatedTimeOfArrival","getBusEstimatedTime","a","routeData","filter","route","StopStatus","busDeparture","Direction","pre","stopStatus","estimateTime","EstimateTime","busReturn","departStopName","setDepartStopName","returnStopName","setReturnStopName","stopOfRoute","getBusStop","returnRoute","stop","stopSequence","StopSequence","isBusCome","stopUid","busState","sameUID","info","uid","Math","round","departurePlateNum","setDeparturePlateNum","returnPlateNum","setReturnPlateNum","realTimeNearStop","getBusPlateNum","bus","plateNumb","PlateNumb","eventType","A2EventType","dutyStatus","DutyStatus","showBusPlateNumb","sequence","sameSequence","busStateIndex","getBusPlateNumInterval","setInterval","getBusinterval","clearInterval","DepartureStop","index","ReturnStop","DestinationName","span","RealTimeStopInfo","estimateBusTime","setEstimateBusTime","getBusEstimateTime","direction","getBusRouteUID","getBusRoute","routeInfo","setRouteInfo","departureStopNameZh","destinationStopNameZh","routeUid","time","interval","App","exact","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.5ec39b59.chunk.js","sourcesContent":["import { createGlobalStyle } from \"styled-components\";\r\n\r\n/* http://meyerweb.com/eric/tools/css/reset/ \r\n   v2.0 | 20110126\r\n   License: none (public domain)\r\n*/\r\n\r\nexport const ResetStyle = createGlobalStyle`\r\nhtml, body, div, span, applet, object, iframe,\r\nh1, h2, h3, h4, h5, h6, p, blockquote, pre,\r\na, abbr, acronym, address, big, cite, code,\r\ndel, dfn, em, img, ins, kbd, q, s, samp,\r\nsmall, strike, strong, sub, sup, tt, var,\r\nb, u, i, center,\r\ndl, dt, dd, ol, ul, li,\r\nfieldset, form, label, legend,\r\ntable, caption, tbody, tfoot, thead, tr, th, td,\r\narticle, aside, canvas, details, embed, \r\nfigure, figcaption, footer, header, hgroup, \r\nmenu, nav, output, ruby, section, summary,\r\ntime, mark, audio, video {\r\n\tmargin: 0;\r\n\tpadding: 0;\r\n\tborder: 0;\r\n\tfont-size: 100%;\r\n\tfont: inherit;\r\n\tvertical-align: baseline;\r\n    box-sizing: border-box;\r\n}\r\n/* HTML5 display-role reset for older browsers */\r\narticle, aside, details, figcaption, figure, \r\nfooter, header, hgroup, menu, nav, section {\r\n\tdisplay: block;\r\n}\r\nbody {\r\n\tline-height: 1;\r\n}\r\nol, ul {\r\n\tlist-style: none;\r\n}\r\nblockquote, q {\r\n\tquotes: none;\r\n}\r\nblockquote:before, blockquote:after,\r\nq:before, q:after {\r\n\tcontent: '';\r\n\tcontent: none;\r\n}\r\ntable {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\r\n}\r\n`;\r\n\r\nexport const GlobalStyle = createGlobalStyle`\r\nhtml {\r\n    box-sizing: border-box;\r\n}\r\n`;","export const MEDIA_MD = '@media only screen and (min-width: 768px)';\r\nexport const MEDIA_LG = '@media only screen and (min-width: 1440px)';\r\n","import styled from 'styled-components';\r\nimport { MEDIA_MD, MEDIA_LG } from '../../constants/breakpoint';\r\n\r\n\r\nexport const NavBarStyle = styled.nav`\r\n    background-color: #FFFFFF;\r\n    width: 100%; \r\n    position: relative;\r\n    top: 0;\r\n    height: 80px;\r\n    overflow: hidden;\r\n\r\n    .link {\r\n        width: 104px;\r\n        height: 38px;\r\n    }\r\n`;\r\n\r\nexport const Logo = styled.div`\r\n    position: absolute;\r\n    top: 20px;\r\n    left: 30px;\r\n\r\n    ${MEDIA_LG} {\r\n        left: 150px;\r\n    }\r\n`;\r\n\r\nexport const FindBusIcon = styled.div`\r\n    width: 104px;\r\n    height: 38px;\r\n    font-size: 20px;\r\n    color: #FFFFFF;\r\n    background: #6B00FF;\r\n    border-radius: 100px;\r\n    position: absolute;\r\n    top: 21px;\r\n    right: 30px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n\r\n    ${MEDIA_LG} {\r\n        right: 150px;\r\n    }\r\n`;\r\n\r\nexport const MenuStyle = styled.button`\r\n    position: absolute;\r\n    top: 20px;\r\n    right: 30px;\r\n    border: none;\r\n    background: transparent;\r\n`;\r\n\r\nexport const DropdownMenuStyle = styled.div`\r\n    position: relative;\r\n    top: 80px;\r\n    width: 411px;\r\n    height: 284px;\r\n    background-color: #6B00FF;\r\n    border-radius: 0 0 16px 16px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    justify-content: center;\r\n    align-items: center; \r\n    row-gap: 52px;\r\n    z-index: 5;\r\n\r\n    \r\n    a {\r\n        text-align: center;\r\n        color: #FFFFFF;\r\n        text-decoration: none;\r\n        display: block;\r\n        font-size: 28px;\r\n    }\r\n\r\n    div {\r\n        position: absolute;\r\n        width: 395px;\r\n        height: 0;\r\n        border-bottom: 1px solid #00C2BA;\r\n        postion: absolute;\r\n    }\r\n    \r\n    .first-border {\r\n        top: 98px;\r\n    }\r\n\r\n    .second-border {\r\n        bottom: 88px;\r\n    }\r\n`;","export default __webpack_public_path__ + \"static/media/Logo.5d5cbc0e.svg\";","export default __webpack_public_path__ + \"static/media/searchicon.e1e77232.svg\";","export default __webpack_public_path__ + \"static/media/menu.de72c7e0.svg\";","import React, { useState } from 'react';\r\nimport { NavBarStyle, Logo, MenuStyle, DropdownMenuStyle, FindBusIcon } from './style';\r\nimport logo from  '../../assets/Logo.svg';\r\nimport menuIcon from '../../assets/menu.svg';\r\nimport searchIcon from '../../assets/searchicon.svg';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const NavBar = () => {\r\n    //選單是否開啟\r\n    const [ isMenuOpen, setIsMenuOpen ] = useState(true);\r\n    \r\n    //選單狀態\r\n    const showMenu = () => {\r\n      const menu = document.getElementById('dropdown');\r\n      if (isMenuOpen === false) {\r\n        setIsMenuOpen(true);\r\n        //menu.style.display = 'none';\r\n      } else {\r\n        setIsMenuOpen(false);\r\n        //menu.style.display = 'block';\r\n      }\r\n    }\r\n    \r\n    //打開、隱藏選單\r\n    function dropdownMenu() {\r\n      const navBar = document.getElementById('navBar');\r\n      if (isMenuOpen === true) {\r\n        navBar.style.overflow = 'visible';\r\n        showMenu();\r\n      } else {\r\n        navBar.style.overflow = 'hidden';\r\n        showMenu();\r\n      }\r\n    } \r\n\r\n    return (\r\n      <NavBarStyle id=\"navBar\" className=\"navbar\">\r\n          <Logo><img src={logo} alt=\"logo\"/></Logo>\r\n          <Link to=\"/\" className=\"link\">\r\n            <FindBusIcon>\r\n              <img src={searchIcon} alt=\"searchbus\"/>\r\n              找公車\r\n            </FindBusIcon>\r\n          </Link>\r\n          {/*<MenuStyle className=\"menu\" onClick={dropdownMenu} >\r\n            <img src={menuIcon} alt=\"menuIcon\"/>\r\n          </MenuStyle>\r\n          \r\n          <DropdownMenuStyle id=\"dropdown\" className=\"dropdown\">\r\n            <a href=\"#\">找公車</a>\r\n            <div className=\"first-border\"></div>\r\n            <a href=\"#\">附近站牌</a>\r\n            <div className=\"second-border\"></div>\r\n            <a href=\"#\">轉乘規劃</a>\r\n            </DropdownMenuStyle>*/}\r\n      </NavBarStyle>\r\n    );\r\n};\r\n\r\n","import styled from 'styled-components';\r\nimport radioUnchecked from '../../assets/radio-unchecked.png';\r\nimport radioChecked from '../../assets/radio-checked.png';\r\nimport { MEDIA_MD, MEDIA_LG} from '../../constants/breakpoint';\r\n\r\nexport const SearchBusContainer = styled.div`\r\n  max-width: 411px;\r\n  margin: 0 auto;\r\n  margin-bottom: 30px;\r\n   \r\n  img {\r\n    width: 100%;\r\n    position: fixed;\r\n    bottom: 0;\r\n    left: 0;\r\n    z-index: -999;\r\n  }\r\n\r\n  ${MEDIA_MD} {\r\n    max-width: 768px;\r\n  }\r\n\r\n  ${MEDIA_LG} {\r\n    max-width: 1200px;\r\n  }\r\n\r\n`;\r\n\r\nexport const SearchBus = styled.div`\r\n\r\n  h1 {\r\n      color: #6B00FF;\r\n      font-size: 36px;\r\n      font-weight: 700;\r\n      text-align: center;\r\n      margin: 30px 0 20px 0;\r\n  }\r\n\r\n  ${MEDIA_MD} {\r\n    h1 {\r\n      margin: 60px 0 30px 0;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SearchBox = styled.div`\r\n   width: 379px;\r\n   height: 208px;\r\n   background-color: #FFFFFF;\r\n   margin: 0 auto;\r\n   border-radius: 16px;\r\n   box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\r\n   postition: relative;\r\n   \r\n   ${MEDIA_MD} {\r\n    width: 500px;\r\n   }\r\n`;\r\n\r\nexport const SearchForm = styled.form`\r\n  \r\n  padding-top: 16px;\r\n  \r\n  input[type=\"radio\"] { \r\n    display: none;\r\n  }\r\n\r\n  .searchRoute {\r\n    padding-left: 93.5px;\r\n  }\r\n\r\n  .searchStop {\r\n    padding-left: 40px;\r\n  }\r\n\r\n  label {\r\n    color: #6B00FF;\r\n    font-weight: 700;\r\n  }\r\n\r\n  span {\r\n    box-sizing: content-box;\r\n    padding-left: 8px;\r\n    \r\n  }\r\n\r\n  input[type=\"radio\"] + label span {\r\n    width: 24px;\r\n    height: 24px;\r\n    display: inline-block;\r\n    vertical-align:middle;\r\n    background: url(${radioUnchecked}) no-repeat;\r\n\r\n  }\r\n\r\n  input[type=\"radio\"]:checked + label span {\r\n    background: url(${radioChecked})  no-repeat;\r\n  }\r\n\r\n  input[type=\"text\"] {\r\n    width: 293px;\r\n    height: 51px;\r\n    position: absolute;\r\n    border-radius: 16px;\r\n    border: 1px solid #E0E0E0;\r\n    background-color: #F2F2F2;\r\n    padding-left: 58px;\r\n    color: #5B4E6E;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n  }\r\n  .search {\r\n    position: absolute;\r\n    left: 16px;\r\n    bottom: 20px;\r\n    color: #6B00FF;\r\n    font-weight: 700;\r\n    z-index: 4;\r\n  } \r\n\r\n  ${MEDIA_MD} {\r\n\r\n    .searchRoute {\r\n      padding-left: 150px;\r\n    }\r\n\r\n    input[type=\"text\"] {\r\n      width: 414px;\r\n    }\r\n  }\r\n`;\r\n\r\nexport const SelectCity = styled.select`\r\n   appearance:none;\r\n   -moz-appearance:none;\r\n   -webkit-appearance:none;\r\n   width: 355px;\r\n   height: 55px;\r\n   border-radius: 16px;\r\n   border: 1px solid #E0E0E0;\r\n   margin: 20px 12px;\r\n   color: #5B4E6E;\r\n   font-size: 16px;\r\n   font-weight: 700;\r\n   padding-left: 58px;\r\n   background-color: #F2F2F2;\r\n   position: relative;\r\n\r\n   ${MEDIA_MD}{\r\n     width: 476px;\r\n   }\r\n   \r\n`;\r\n\r\n//  background: url(${arrow}) no-repeat scroll right center transparent;\r\nexport const CityName = styled.div`\r\n    position: absolute;\r\n    top: 40px;\r\n    left: 28px;\r\n    color: #6B00FF;\r\n    font-weight: 700;\r\n    z-index: 4;\r\n`;\r\n\r\nexport const SearchInputContainer = styled.div`\r\n  width: 355px;\r\n  height: 56px;\r\n  margin-left: 12px;\r\n  position: relative;\r\n`;\r\n\r\nexport const SelectCityContainer = styled.div`\r\n  position: relative;\r\n  img {\r\n    width: 12px;\r\n    height: 7px;\r\n    position: absolute;\r\n    left: 333px;\r\n    top: 45px;\r\n    z-index: 5;\r\n\r\n    ${MEDIA_MD} {\r\n      left: 455px;\r\n    }\r\n  }\r\n`;\r\n\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHnSURBVHgBtZbrbcIwFIWd8OYHygKIZIK2G9AJ6AZtN+gGwAZ0gtINygRNJygbxGWBWPzg/eg5loNQCoFCciQT4sD5cq/ta1vihIIgaFqW9YivTTTHNGrItt1uB57nfSR5WAnmLzBvFwoFB03k83mRy+UE+gSMxXq91m0+n4vVaiXR32k0Gu9nQWDu4g9vMG5WKhVtfkqbzUaMx2NefbzAMyKTRyEG8Alzl4D/ajKZiNlsJgG63wdZewAHgO9LAQdAdwAp9tl7zzulUukqAFWtVkW5XHZt225HfToSpgmDGtRqNYGH4lpxYiilOEZMm68dOYsYQRoA4yeQFfq19D0/pJShA6UFoRhNGIYKV8/mYuNaSBNAMRoMARfuLbztm7QBkbjG4N2gu5MVxPi62bjHYZhmPywLWcj4KkYiUeBEFmIBRcqGhAxxw6km0hQBeHlVr9e/bNYXTLc+6o1IUyY7ep/RA4/cDQhJKxpGMZ1O6dfdQVhfcOmxgqYhA+hF5X43hRFNF7uc5A+uEV90sVhI+kV9OwjHhpsNIBeDYpuW+gMxIGlAPks1c3uOlsul3n4B8OO7IpV0kHgyBwm3WCzqQ0T8IMEZhNToqWoOEq+HvI5CIo1Goxby+4Cvt6ZRyjQf4D7XQpLHLxhiIfvZxMg1AAAAAElFTkSuQmCC\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAYCAYAAAAPtVbGAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAK+SURBVHgBtVY7bNNQFL2248RRpZCOIKVJuoEEFMoIUhAjRe1Qpg6UoQMswEYnYKJjmMpGkaBTByoFJiSCYKQQUcHYpBnaMSZD4iROwj2P51cnkF8jjvTk3/M5795377E1GoB8Pp/SNO0Wn6Z4ROUAchjtdns7mUy+6ceh9SG/z+SPTNOM8qBAIECGYRDfIyamZrMpRq1WI9d1C3z/cTwefzmUCJMn+IUXTJwKh8OCfBBarRaVy2Ucs7yA2xxZoaeIFPjA5AkIjIpKpUKO4xRY6KpfSPMJRFngW7eAY2v0ZTNAPzMmHe7q5PzSyDrRppNnWzS7VOfh9hK6wEJ2t0jasqx7ExMT6oW9TwZt3QlTqdhz62hyqkWL6w5NX2l2CPFepXmPHigRpIk3NR+JREjXdTFx55VJW3ctGhY316t0UUaFwrBtG3uEtGUFI6oIKfIESvs6ZVZDNAoyDy1+70/EqMBQKAS+eVzrcs4CytTD+6dBkftRUOX5SK0HLJojWsZe62g29II/iq+bJh0He58NtThEw1uAxp1hbv28JwAc7Oo0Dn5kDHWOHmPuOBijfpHDMUVKxaP3JW9iPMYhoXOZ7cMWPExOtWkcoEk9SF4bkRTY4NSDM3MujYNT546aEgbKKctBJMcXNhoICLNlTF9u0nEwu9RQmYAAL96OxWIfdfgLl9sG+42avPjcEf40CjD/2mpNXcvsiO+M2HjO3TZEvGjgR3NrtVE06Maa0xFFtVoF3xMlAn/hQxrGRr7QV95WBhYCFrTyrqJ8C5ACac/uB1o9sPPaZBcI0MF3Q1k9Nvj0dZcuMbk/tX2tXgr9l49WRzPiASZwuFlYNXI7DBqNhvj8skC2W+CvSPzgqJblj0QiGAyKn4juHwlUUL1eF6UqfySe/YtroJ8Xi8V5rr4FPp2RA7DlyLLwBnqhH8dvWUR66K+/URcAAAAASUVORK5CYII=\"","export default __webpack_public_path__ + \"static/media/searchBus-lg.664475c0.png\";","import styled from 'styled-components';\r\nimport { MEDIA_MD, MEDIA_LG} from '../../constants/breakpoint';\r\n\r\nexport const BusCardContainer = styled.div`\r\n  width: 379px;\r\n  margin: 30px auto 0 auto;\r\n  padding: 16px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: rgba(242, 242, 242, 0.8);\r\n  backdrop-filter: blur(5px);\r\n  border-radius: 16px;\r\n  flex-wrap: wrap; \r\n  gap: 20px 16px;\r\n  position: relative;\r\n\r\n  .link {\r\n    width: 92%;\r\n    height: 90px;\r\n  }\r\n  \r\n  ${MEDIA_MD} {\r\n    width: 648px;\r\n\r\n    .link{\r\n      width: 300px;\r\n    }\r\n  }\r\n\r\n  ${MEDIA_LG} {\r\n    width: 1140px;\r\n\r\n    .link {\r\n      width: 358.67px;\r\n    }\r\n  }\r\n\r\n`;\r\n\r\nexport const Card = styled.div`\r\n  width: 100%;\r\n  height: 90px;\r\n  border-radius: 16px;\r\n  background-color: #6B00FF;\r\n  cursor: pointer;\r\n  padding: 16px;\r\n  position: relative;\r\n  \r\n\r\n  &:hover {\r\n    box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\r\n  }\r\n\r\n`;\r\n\r\n\r\n\r\nexport const RouteName = styled.p`\r\n  width: 100%;\r\n  color: #FFFFFF;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  display: inline-block;\r\n  \r\n  ${MEDIA_MD} {\r\n    font-size: 20px\r\n  }\r\n\r\n`;\r\n\r\nexport const City = styled.div`\r\n  width: 58px;\r\n  height: 20px;\r\n  background: #42EDF0;\r\n  border-radius: 20px;\r\n  color: #6B00FF;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  vertical-align: center;\r\n  padding: 3px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 16px;\r\n\r\n`;\r\n\r\nexport const Destination = styled.p`\r\n  color: #FFCC00;\r\n  font-size: 14px;\r\n  margin-top: 7px;\r\n  font-weight: 500px;\r\n  position: absolute;\r\n  bottom: 16px;\r\n\r\n  ${MEDIA_MD} {\r\n    font-size: 16px;\r\n  }\r\n`;","import React from 'react';\r\nimport { BusCardContainer, Card, RouteName, City, Destination } from './style';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const BusCard = ({ busRouteData, twCityName, setRouteUID, setRoundName }) => {\r\n  \r\n  const handleClick = (busRoute) => () =>\r\n  {\r\n    setRouteUID(busRoute.RouteUID);\r\n    setRoundName({\r\n      depart: busRoute.DepartureStopNameZh,\r\n      destination: busRoute.DestinationStopNameZh\r\n    })\r\n  };\r\n\r\n  return (\r\n    <BusCardContainer>\r\n      {busRouteData.map(busRoute => (\r\n          <Link to={`/busroute/${busRoute.RouteName.Zh_tw}`} className=\"link\">\r\n              <Card onClick={handleClick(busRoute)} >\r\n                <RouteName>{busRoute.RouteName.Zh_tw.length < 15 ? busRoute.RouteName.Zh_tw : busRoute.RouteName.Zh_tw.slice(0, 14) + '...'}</RouteName>\r\n                <City>{twCityName}</City>\r\n                <Destination>{busRoute.DepartureStopNameZh} ↔ {busRoute.DestinationStopNameZh}</Destination>\r\n              </Card>\r\n          </Link>\r\n      ))}\r\n    </BusCardContainer>\r\n    \r\n  );\r\n\r\n}","import styled from 'styled-components';\r\nimport { MEDIA_MD, MEDIA_LG } from '../../constants/breakpoint';\r\n\r\nexport const BusCardContainer = styled.div`\r\n  width: 379px;\r\n  margin: 30px auto 0 auto;\r\n  padding: 16px 0;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: rgba(242, 242, 242, 0.8);\r\n  backdrop-filter: blur(5px);\r\n  border-radius: 16px;\r\n  flex-wrap: wrap; \r\n  gap: 20px 16px;\r\n  position: relative;\r\n\r\n  .link {\r\n    width: 92%;\r\n    height: 90px;\r\n  }\r\n  \r\n  ${MEDIA_MD} {\r\n    width: 648px;\r\n\r\n    .link{\r\n      width: 300px;\r\n    }\r\n  }\r\n\r\n  ${MEDIA_LG} {\r\n    width: 1140px;\r\n\r\n    .link {\r\n      width: 358.67px;\r\n    }\r\n  }\r\n\r\n`;\r\n\r\nexport const Card = styled.div`\r\n  width: 100%;\r\n  height: 90px;\r\n  border-radius: 16px;\r\n  background-color: #6B00FF;\r\n  cursor: pointer;\r\n  padding: 16px;\r\n  position: relative;\r\n  \r\n\r\n  &:hover {\r\n    box-shadow: 0px 5px 4px rgba(0, 0, 0, 0.25);\r\n  }\r\n\r\n`;\r\n\r\n\r\n\r\nexport const RouteName = styled.p`\r\n  width: 100%;\r\n  color: #FFFFFF;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n  display: inline-block;\r\n  \r\n  ${MEDIA_MD} {\r\n    font-size: 20px\r\n  }\r\n\r\n`;\r\n\r\nexport const City = styled.div`\r\n  width: 58px;\r\n  height: 20px;\r\n  background: #42EDF0;\r\n  border-radius: 20px;\r\n  color: #6B00FF;\r\n  font-size: 14px;\r\n  text-align: center;\r\n  vertical-align: center;\r\n  padding: 3px;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 16px;\r\n\r\n`;\r\n\r\nexport const Destination = styled.p`\r\n  color: #FFCC00;\r\n  font-size: 14px;\r\n  margin-top: 7px;\r\n  font-weight: 500px;\r\n  position: absolute;\r\n  bottom: 16px;\r\n\r\n  ${MEDIA_MD} {\r\n    font-size: 16px;\r\n  }\r\n`;","import React from 'react';\r\nimport { BusCardContainer, Card, RouteName, City, Destination } from './style';\r\nimport { Link } from 'react-router-dom';\r\n\r\nexport const StopBusCard = ({ busStopData, twCityName, setStopUID }) => {\r\n  \r\n  return (\r\n    <BusCardContainer>\r\n        {busStopData.map(busStop => (\r\n          <Link to={`/busstop/${busStop.StopName.Zh_tw}`} className=\"link\">\r\n            <Card onClick={() => setStopUID(busStop.StopUID)}>\r\n                <RouteName>{busStop.StopName.Zh_tw.length < 15 ? busStop.StopName.Zh_tw : busStop.StopName.Zh_tw.slice(0, 14) + '...'}</RouteName>\r\n                <City>{twCityName}</City>\r\n                <Destination>{busStop.StopAddress}</Destination>\r\n            </Card>\r\n          </Link> \r\n        ))}\r\n    </BusCardContainer>\r\n  );\r\n}","export const location = [\r\n    {\r\n        city: '基隆市',\r\n        enCityName: 'Keelung'\r\n    },\r\n    {\r\n        city: '新北市',\r\n        enCityName: 'NewTaipei'\r\n    },\r\n    {\r\n        city: '臺北市',\r\n        enCityName: 'Taipei'\r\n    },\r\n    {\r\n        city: '桃園市',\r\n        enCityName: 'Taoyuan'\r\n    },\r\n    {\r\n        city: '新竹市',\r\n        enCityName: 'Hsinchu'\r\n    },\r\n    {\r\n        city: '新竹縣',\r\n        enCityName: 'HsinchuCounty'\r\n    },\r\n    {\r\n        city: '苗栗縣',\r\n        enCityName: 'MiaoliCounty'\r\n    },\r\n    {\r\n        city: '台中市',\r\n        enCityName: 'Taichung'\r\n    },\r\n    {\r\n        city: '彰化縣',\r\n        enCityName: 'ChanghuaCounty'\r\n    },\r\n    {\r\n        city: '南投縣',\r\n        enCityName: 'NantouCounty'\r\n    },\r\n    {\r\n        city: '雲林縣',\r\n        enCityName: 'YunlinCounty'\r\n    },\r\n    {\r\n        city: '嘉義市',\r\n        enCityName: 'Chiayi'\r\n    },\r\n    {\r\n        city: '嘉義縣',\r\n        enCityName: 'ChiayiCounty'\r\n    },\r\n    {\r\n        city: '台南市',\r\n        enCityName: 'Tainan'\r\n    },\r\n    {\r\n        city: '高雄市',\r\n        enCityName: 'Kaohsiung'\r\n    },\r\n    {\r\n        city: '屏東縣',\r\n        enCityName: 'PingtungCounty'\r\n    },\r\n    {\r\n        city: '台東縣',\r\n        enCityName: 'TaitungCounty'\r\n    },\r\n    {\r\n        city: '花蓮縣',\r\n        enCityName: 'HualienCounty'\r\n    },\r\n    {\r\n        city: '澎湖縣',\r\n        enCityName: 'PenghuCounty'\r\n    },\r\n    {\r\n        city: '金門縣',\r\n        enCityName: 'KinmenCounty'\r\n    },\r\n    {\r\n        city: '連江縣',\r\n        enCityName: 'LienchiangCounty'\r\n    }\r\n];\r\n\r\n\r\n\r\n//get routeUID by stopUID\r\nfunction getRouteUID(data, stopUID, routeId) {\r\n    //let routeId = [];\r\n    let stopInfo = [];\r\n\r\n    for (let i =0; i< data.length; i++) {\r\n      stopInfo.push(data[i].RouteUID);\r\n      stopInfo.push(data[i].Stops);\r\n      let stopInfoFlat = stopInfo.flat();\r\n      let sameStopId = stopInfoFlat.findIndex(item => item.StopUID === `${stopUID}`);\r\n      let repeatInfo = routeId.findIndex(item => item === stopInfoFlat[0]);\r\n      //console.log(stopInfoFlat);\r\n      if (sameStopId > -1 && repeatInfo === -1) {\r\n        routeId.push(stopInfoFlat[0]);\r\n        stopInfo = []\r\n      } else {\r\n        stopInfo = []\r\n      }\r\n      //console.log(routeId);\r\n      };\r\n    \r\n   return routeId;\r\n};\r\n\r\nexport default getRouteUID;","import { AppID, AppKey } from './apiKey';\r\nimport jsSHA from 'jssha';\r\n\r\nfunction getAuthorizationHeader() {\r\n        let GMTString = new Date().toGMTString();\r\n        let ShaObj = new jsSHA('SHA-1', 'TEXT');\r\n        ShaObj.setHMACKey(AppKey, 'TEXT');\r\n        ShaObj.update('x-date: ' + GMTString);\r\n        let HMAC = ShaObj.getHMAC('B64');\r\n        let Authorization = 'hmac username=\\\"' + AppID + '\\\", algorithm=\\\"hmac-sha1\\\", headers=\\\"x-date\\\", signature=\\\"' + HMAC + '\\\"';\r\n        return { 'Authorization': Authorization, 'X-Date': GMTString }; \r\n}\r\n\r\nexport default getAuthorizationHeader;\r\n","export let AppID = '8169cb31a9d144a29702b83c1647652d';\r\nexport let AppKey = 'zWYkCVgJ4RhIOW3JMUUorOh2T_U';\r\n","import React, { useState, useEffect } from 'react';\r\nimport { SearchBus, SearchBox, SearchForm, SearchInputContainer, SearchBusContainer, SelectCity, CityName, SelectCityContainer } from './style';\r\nimport backgroundLg from '../../assets/searchBus-lg.png';\r\nimport { BusCard } from '../BusCard/BusCard';\r\nimport { StopBusCard } from '../StopBusCard/StopBusCard';\r\nimport { location } from '../../constants/utils';\r\nimport getAuthorizationHeader from '../../BusApi/busApi';\r\nimport arrow from '../../assets/arrow.png';\r\n\r\nexport const FindBus = ({ \r\n    setTwCityName, \r\n    twCityName, \r\n    cityName, \r\n    setCityName, \r\n    setRouteUID, \r\n    routeUID, \r\n    setRoundName,\r\n    setStopUID\r\n}) => {\r\n\r\n    //搜尋所需資料\r\n    const [ searchMethod, setSearchMethod ] = useState('searchRoute');\r\n    const [ routeName, setRouteName ] = useState('');\r\n    const [ stopName, setStopName ] = useState('');\r\n     \r\n    //TDX API資料\r\n    const [ busRouteData, setBusRouteData ] = useState([]);\r\n    const [ busStopData, setBusStopData ] = useState([]);\r\n    //const BgWidth = document.getElementById('SearchBusContainer').style.maxWidth;\r\n    \r\n    //取得選取縣市\r\n    function handleSelectChange() {\r\n        const select = document.getElementById('selectCity');\r\n        const text = select.options[select.selectedIndex].text; \r\n        setTwCityName(text);\r\n        setCityName(select.value);\r\n    };\r\n    \r\n    //取得輸入路線、站牌名稱\r\n    function handleTermChange(e) {\r\n        e.preventDefault();\r\n        const value = e.target.value;\r\n        const encode = encodeURIComponent(value);\r\n        setRouteName(value);\r\n        setStopName(encode);\r\n    };\r\n    \r\n    //判別選取搜尋模式\r\n    function handleRadioChange() {\r\n        const checkedRadio = document.forms.SearchForm.elements[\"search\"];\r\n        setSearchMethod(checkedRadio.value);\r\n    };\r\n\r\n     //取得公車路線、站牌API資料\r\n    const routeUrl = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${cityName}/${routeName}?%24top=24&%24format=JSON`;\r\n    const stopUrl = `https://ptx.transportdata.tw/MOTC/v2/Bus/Stop/City/${cityName}?%24filter=contains(StopName%2FZh_tw%2C%20'${stopName}')&%24top=24&%24format=JSON`;\r\n    \r\n    const fetchBusRoute = () => {\r\n        return fetch(routeUrl, { headers: getAuthorizationHeader() }).then(res => {\r\n            if (res.ok) {\r\n                return res.json();\r\n            } else if (res.status > 400) {\r\n                return [];\r\n            }\r\n            throw new Error('Request failed!');\r\n        }, (e) => {\r\n            console.log(e.message)\r\n          })\r\n        .then(jsonRes => setBusRouteData(jsonRes));\r\n    };\r\n  \r\n    const fetchBusStop = () => {\r\n        return fetch(stopUrl, { headers: getAuthorizationHeader() }).then(res => res.json())\r\n        .then(jsonRes => {\r\n            //console.log(jsonRes)\r\n            setBusStopData(jsonRes)\r\n        });\r\n    };\r\n\r\n    const isDataLoad = () => {\r\n        if (busRouteData.length === 0 && busStopData.length === 0) return;\r\n        return (\r\n        searchMethod === 'searchRoute'? \r\n        <BusCard \r\n        busRouteData={busRouteData} \r\n        twCityName={twCityName} \r\n        setRouteUID={setRouteUID} \r\n        routeUID={routeUID} \r\n        setRoundName={setRoundName}\r\n        /> : \r\n        <StopBusCard \r\n        busStopData={busStopData} \r\n        twCityName={twCityName} \r\n        setRouteUID={setRouteUID}\r\n        setStopUID={setStopUID}\r\n        />\r\n        )\r\n    }\r\n  \r\n    useEffect(()=>{\r\n        if(routeName.length === 0 || stopName === 0) return;\r\n        if(searchMethod ==='searchRoute'){\r\n          fetchBusRoute()\r\n        } else {\r\n          fetchBusStop()\r\n        }\r\n    }, [cityName, routeName, searchMethod])\r\n\r\n\r\n    return (\r\n     <SearchBusContainer id=\"SearchBusContainer\">\r\n        <SearchBus>\r\n            <h1>找公車</h1>\r\n            <SearchBox>\r\n                <SearchForm id=\"SearchForm\">\r\n                    <input  type=\"radio\" id=\"searchRoute\" name=\"search\" value=\"searchRoute\" onChange={handleRadioChange} defaultChecked/>\r\n                    <label htmlFor=\"searchRoute\" className=\"searchRoute\"><span></span>查路線</label>\r\n                    <input  type=\"radio\" id=\"searchStop\" name=\"search\" value=\"searchStop\" className=\"searchStop\" onChange={handleRadioChange} />\r\n                    <label htmlFor=\"searchStop\" className=\"searchStop\"><span></span>查站牌</label><br/>\r\n                    <SelectCityContainer>\r\n                        <CityName>縣市</CityName>\r\n                        <SelectCity id=\"selectCity\" onChange={handleSelectChange}>\r\n                            <option value=\"\">選取縣市</option>\r\n                            {location.map(city => (\r\n                                <option value={city.enCityName}>{city.city}</option>\r\n                            ))}\r\n                        </SelectCity>\r\n                        <img src={arrow} alt=\"arrow\"/>\r\n                    </SelectCityContainer>\r\n                    <SearchInputContainer>\r\n                        <div className=\"search\">搜尋</div>\r\n                        <label htmlFor=\"searchText\"></label>\r\n                        <input type=\"text\" id=\"searchText\" name=\"searchText\" onChange={handleTermChange}/>\r\n                    </SearchInputContainer>\r\n                </SearchForm>\r\n            </SearchBox>\r\n        </SearchBus>\r\n        {isDataLoad()}\r\n        <img src={backgroundLg} alt=\"background\" />\r\n     </SearchBusContainer>\r\n    );\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAICAYAAADN5B7xAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACFSURBVHgBhZDRDYMwDERf0kU6QjfoKvSvrboD7Q7lG7EBmyAmYBTjQ4CCCOJ+7PjeWUnA9cSunOiN3VSjN+UFhg/2PYLlBejExgi9hgZlLqSZvGm7s/FPaH3wyIVS2FWIDckdCz/U6r3+lgULXBGa2ds8bA0lWuFdIBPawIfSF76we84bAQidMVYMZpQvAAAAAElFTkSuQmCC\"","import styled from 'styled-components';\r\nimport { MEDIA_MD, MEDIA_LG } from '../../constants/breakpoint';\r\nimport busIcon from '../../assets/bus-icon.png';\r\n\r\nexport const BusInfoContaienr = styled.div`\r\n    max-width: 411px;\r\n    margin: 0 auto;\r\n    \r\n    ${MEDIA_MD} {\r\n        max-width: 768px;\r\n    }\r\n`;\r\n\r\n\r\nexport const TopBarContainer = styled.div`\r\n    width: 411px;\r\n    \r\n    ${MEDIA_MD} {\r\n        width: 768px;\r\n    }\r\n`;\r\n\r\nexport const TopBar = styled.div`\r\n    width: 100%;\r\n    border-radius: 0px 0px 16px 16px;\r\n    background: #6B00FF;\r\n    height: 96px;\r\n    padding: 16px 0 16px 30px;\r\n    position: absolute;\r\n    top: 80px;\r\n    left: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    \r\n    ${MEDIA_MD} {\r\n        padding-left: 7%;\r\n        height: 114px;\r\n    }\r\n`;\r\n\r\nexport const City = styled.div`\r\n    background: #42EDF0;\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    width: 58px;\r\n    height: 20px;\r\n    color: #6B00FF;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding-top: 3px;\r\n`;\r\n\r\nexport const RouteName = styled.h2`\r\n    font-size: 28px;\r\n    color: #FFFFFF;\r\n    font-weight: bold;\r\n    position: absolute;\r\n    bottom: 16px;\r\n    \r\n    ${MEDIA_MD} {\r\n        font-size: 36px;\r\n        bottom: 25px;\r\n    }\r\n\r\n`;\r\n\r\nexport const Destination = styled.div`\r\n    margin-top: 144px;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    align-items: center;\r\n    position: relative;\r\n\r\n    .lower-right {\r\n        border: 2px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 15px;\r\n        height: 0px;\r\n        transform: rotate(-45deg);\r\n        position: absolute;\r\n        left: 206px;  \r\n        top: 230px;\r\n    }\r\n\r\n    .upper-right {\r\n        border: 2px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 15px;\r\n        height: 0px;\r\n        transform: rotate(45deg);\r\n        position: absolute;\r\n        left: 206px;  \r\n        top: 218px;\r\n    }\r\n    \r\n    .unclick {\r\n        background-color: #E0E0E0;\r\n        color: #5B4E6E;\r\n    }\r\n\r\n    .clicked {\r\n       background-color: #6B00FF;\r\n       color: #FFFFFF;\r\n    }\r\n    \r\n`;\r\n\r\nexport const Departure = styled.button`\r\n    border: none;\r\n    width: 158.5px;\r\n    height: 40px;\r\n    border-radius: 16px;\r\n    text-align: center;\r\n    font-size: 16px;\r\n    \r\n    line-height: 40px;\r\n    font-weight: bold;\r\n    margin: 0 16px;\r\n    cursor: pointer;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 323px;\r\n        height: 46px;\r\n        line-height: 46px;\r\n        font-size: 20px;\r\n        margin: 0 16px 0 30px;\r\n    }\r\n`;\r\n\r\nexport const Terminal = styled(Departure)`\r\n\r\n    ${MEDIA_MD} { \r\n        margin: 0 30px 0 16px;\r\n    }\r\n`;\r\n\r\nexport const Arrow = styled.div`\r\n    border: 1.5px solid #BDBDBD;\r\n    background: #BDBDBD;\r\n    width: 30px;\r\n    height: 0px;\r\n    position: relative;\r\n\r\n    .lower-right {\r\n        border: 1.5px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 13px;\r\n        height: 0px;\r\n        transform: rotate(-45deg);\r\n        position: absolute;\r\n        left: 19px;  \r\n        top: 3px;\r\n    }\r\n\r\n    .upper-right {\r\n        border: 1.5px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 13px;\r\n        height: 0px;\r\n        transform: rotate(45deg);\r\n        position: absolute;\r\n        left: 19px;  \r\n        top: -5px;\r\n    }\r\n\r\n    .lower-left {\r\n        border: 1.5px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 13px;\r\n        height: 0px;\r\n        transform: rotate(228deg);\r\n        position: absolute;\r\n        left: -6px;  \r\n        top: 3px;\r\n    }\r\n\r\n    .upper-left {\r\n        border: 1.5px solid #BDBDBD;\r\n        border-radius: 2px;\r\n        background: #BDBDBD;\r\n        width: 13px;\r\n        height: 0px;\r\n        transform: rotate(135deg);\r\n        position: absolute;\r\n        left: -6px;  \r\n        top: -5px;\r\n    }\r\n    \r\n`;\r\n\r\nexport const Stops = styled.div`\r\n    margin-top: 30px;\r\n    display:flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n`;\r\n\r\nexport const StopCard = styled.div`\r\n    width: 349px;\r\n    height: 68px;\r\n    background: #FFFFFF;\r\n    border-radius: 16px;\r\n    padding: 20px 8px;\r\n    position: relative;\r\n    margin-bottom: 12px;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 678px;\r\n        height: 72px;\r\n    }\r\n`;\r\n\r\n\r\nexport const ArrivalTime = styled.div`\r\n    width: 72px;\r\n    height: 28px;\r\n    background: ${props => props.background};\r\n    border-radius: 16px;\r\n    color: #FFFFFF;\r\n    font-size: 14px;\r\n    display: inline-block;\r\n    text-align: center;\r\n    line-height: 28px;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 80px;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        font-size: 16px;\r\n    }\r\n`;\r\n\r\nexport const StopName = styled.div`\r\n    color: #5B4E6E;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n    display: inline-block;\r\n    vertical-align: middle;\r\n    margin-left: 8px;\r\n\r\n    ${MEDIA_MD} {\r\n        font-size: 20px;\r\n    }\r\n`;\r\n\r\nexport const StopOrder = styled.div`\r\n    width: 30px;\r\n    height: 24px;\r\n    font-size: 12px;\r\n    background: ${props => props.background};\r\n    border-radius: 16px;\r\n    color: ${props => props.fontcolor};\r\n    position: absolute;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    top: 20px;\r\n    right: 8px;\r\n\r\n    ${MEDIA_MD} {\r\n        font-size: 14px;\r\n        top: 22px;\r\n    }\r\n`;\r\n\r\nexport const Plate = styled.div`\r\n    width: 80px;\r\n    height: 28px;\r\n    background: #6B00FF;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 16px;\r\n    font-size: 14px;\r\n    line-height: 28px;\r\n    text-align: end;\r\n    padding: 1px 8px 0 8px;\r\n    color: #FFFFFF;\r\n    position: absolute;\r\n    top: 20px;\r\n    right: 48px;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 86px;\r\n        height: 32px;\r\n        font-size: 16px;\r\n        line-height: 28px;\r\n    }\r\n`;\r\n\r\nexport const BusIcon = styled.img`\r\n    position: absolute;\r\n    left: 9px;\r\n    top: 7px;\r\n\r\n    ${MEDIA_MD} {\r\n        top: 8px;\r\n    }\r\n`;\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { BusInfoContaienr, TopBar, City, RouteName, Destination, Stops, Departure, Terminal, Arrow, StopCard, ArrivalTime, StopName, StopOrder, Plate, BusIcon, TopBarContainer} from './style';\r\nimport busIcon from '../../assets/bus-icon.png';\r\nimport { useParams} from \"react-router\";\r\nimport getAuthorizationHeader from '../../BusApi/busApi';\r\n\r\nexport const RealTimeBusInfo = ({ twCityName, cityName, routeUID, roundName }) => {\r\n    let { routeTitle } = useParams();\r\n    const [ isDeparture, setIsDeparture ] = useState(true);\r\n\r\n    const changeColor = () => {\r\n        if (isDeparture) {\r\n            setIsDeparture(false);\r\n        } else {\r\n            setIsDeparture(true);\r\n        }\r\n    }\r\n\r\n    //get 公車預估到站資料\r\n    const [ estimateDepart, setEstimateDepart ] = useState([]);\r\n    const [ estimateReturn, setEstimateReturn ] = useState([]);\r\n    const estimatedTimeOfArrival = `https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/${cityName}?%24filter=contains(RouteUID%2C%20'${routeUID}')&%24format=JSON`;\r\n    \r\n    const getBusEstimatedTime = async() => {\r\n        const res = await fetch(estimatedTimeOfArrival, { headers: getAuthorizationHeader() });\r\n        const jsonRes = await res.json();\r\n            setEstimateDepart([]);\r\n            setEstimateReturn([]);\r\n            let busDeparture;\r\n            let busReturn;\r\n\r\n            const routeData = jsonRes.filter( route => route.RouteUID === routeUID && route.StopStatus === 0);\r\n            //console.log('routeData', routeData);\r\n            //去程\r\n            busDeparture = routeData.filter( route => route.Direction === 0);\r\n            if (busDeparture) {\r\n                busDeparture.map( depart => setEstimateDepart(pre => ([\r\n                ...pre,\r\n                {\r\n                    stopUID: depart.StopUID,\r\n                    stopStatus: depart.StopStatus,\r\n                    estimateTime: depart.EstimateTime\r\n                }\r\n            ])))\r\n            }\r\n            //回程\r\n            busReturn = routeData.filter( route => route.Direction === 1);\r\n            if (busReturn) {\r\n                busReturn.map( depart => setEstimateReturn(pre => ([\r\n                ...pre,\r\n                {\r\n                    stopUID: depart.StopUID,\r\n                    stopStatus: depart.StopStatus,\r\n                    estimateTime: depart.EstimateTime\r\n                }\r\n            ])))\r\n            }\r\n            //console.log('busDeparture', busDeparture);\r\n            //console.log('busReturn', busReturn);\r\n    }\r\n\r\n    //get 公車路線資料\r\n    //Direction = 0 去程; = 1 返程\r\n    const [ departStopName, setDepartStopName ]= useState([]);\r\n    const [ returnStopName, setReturnStopName ] = useState([]);\r\n    const stopOfRoute = `https://ptx.transportdata.tw/MOTC/v2/Bus/StopOfRoute/City/${cityName}?%24filter=contains(RouteUID%2C%20'${routeUID}')&%24top=30&%24format=JSON`;\r\n\r\n    const getBusStop = async () => {\r\n        const res = await fetch(stopOfRoute, { headers: getAuthorizationHeader() });\r\n        const jsonRes = await res.json();\r\n        //console.log('stopdata', jsonRes);\r\n        let departure = [];\r\n        let returnRoute = [];\r\n        //去程站牌\r\n        departure = jsonRes.filter(stop => stop.Direction === 0);\r\n        //console.log('departure', departure);\r\n        departure[0].Stops.map(stop => setDepartStopName(pre => ([\r\n            ...pre,\r\n            {\r\n                stopSequence: stop.StopSequence,\r\n                stopName: stop.StopName.Zh_tw,\r\n                stopUID: stop.StopUID\r\n            }\r\n        ])));\r\n        //返程站牌\r\n        returnRoute = jsonRes.filter(stop => stop.Direction === 1);\r\n        //console.log('returnRoute', returnRoute);\r\n        if (returnRoute.length === 0) return;\r\n        returnRoute[0].Stops.map(stop => setReturnStopName(pre => ([\r\n            ...pre,\r\n            {\r\n                stopSequence: stop.StopSequence,\r\n                stopName: stop.StopName.Zh_tw,\r\n                stopUID: stop.StopUID\r\n            }\r\n        ])));  \r\n    \r\n    };\r\n    \r\n    //判斷公車是否進站\r\n    const isBusCome = (stopUid, busState) => {\r\n        //console.log('state', state);\r\n        //console.log('stopInfo', stopInfo);\r\n        \r\n        //在state尋找相同UID的stop資訊，並將此物件放進新的陣列\r\n        let sameUID = busState.filter(info => info.stopUID === stopUid)\r\n        //console.log(busState);\r\n        if ( sameUID.length === 0) {\r\n           return <ArrivalTime background=\"#BDBDBD\">未發車</ArrivalTime>; \r\n        } else {\r\n        return sameUID.map(uid => {\r\n            let estimateTime = Math.round((uid.estimateTime)/60);\r\n            if (uid.stopStatus === 0 && estimateTime > 1) {\r\n                return <ArrivalTime background=\"#00C2BA\">{estimateTime}分</ArrivalTime>;\r\n             } else if (uid.stopStatus === 0 && estimateTime <= 1) {\r\n                return <ArrivalTime background=\"#EB5757\">進站中</ArrivalTime>;\r\n             } else if (uid.stopStatus === 3) {\r\n                return  <ArrivalTime background=\"#BDBDBD\">末班駛離</ArrivalTime>; \r\n             }\r\n            });\r\n        }\r\n    }\r\n\r\n    const [ departurePlateNum, setDeparturePlateNum ] = useState([]);\r\n    const [ returnPlateNum, setReturnPlateNum ] = useState([]);\r\n    const realTimeNearStop = `https://ptx.transportdata.tw/MOTC/v2/Bus/RealTimeNearStop/City/${cityName}?%24filter=contains(RouteUID%2C%20'${routeUID}')&%24format=JSON`\r\n\r\n    const getBusPlateNum = async () => {\r\n        const res = await fetch(realTimeNearStop, { headers: getAuthorizationHeader() });\r\n        const jsonRes = await res.json();\r\n        setDeparturePlateNum([]);\r\n        setReturnPlateNum([]);\r\n\r\n        let departurePlateNum = [];\r\n        let returnPlateNum = [];\r\n\r\n        departurePlateNum = jsonRes.filter(route => route.Direction === 0);\r\n        departurePlateNum.map(bus => setDeparturePlateNum(pre => ([\r\n            ...pre,\r\n            {\r\n                plateNumb: bus.PlateNumb,\r\n                stopSequence: bus.StopSequence,\r\n                eventType: bus.A2EventType,\r\n                dutyStatus: bus.DutyStatus\r\n            }\r\n        ])));\r\n\r\n        returnPlateNum = jsonRes.filter(route => route.Direction === 1);\r\n        returnPlateNum.map(bus => setReturnPlateNum(pre => ([\r\n            ...pre,\r\n            {\r\n                plateNumb: bus.PlateNumb,\r\n                stopSequence: bus.StopSequence,\r\n                eventType: bus.A2EventType,\r\n                dutyStatus: bus.DutyStatus\r\n            }\r\n        ])));\r\n    }\r\n\r\n    const showBusPlateNumb = (sequence, busState) => {\r\n        const sameSequence = busState.findIndex(stop => stop.stopSequence === sequence);\r\n        const busStateIndex = busState[sameSequence];\r\n        if (sameSequence > -1 && busStateIndex.eventType === 1 && busStateIndex.dutyStatus === 0) {\r\n            return (<>\r\n                    <StopOrder background=\"#6B00FF\" fontcolor=\"#FFFFFF\">{sequence}</StopOrder>\r\n                    <Plate><BusIcon src={busIcon}></BusIcon>{busState[sameSequence].plateNumb}</Plate>\r\n                    </>);\r\n        } else {\r\n            return <StopOrder background=\"#F2F2F2\" fontcolor=\"#BDBDBD\">{sequence}</StopOrder>\r\n        }\r\n\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getBusEstimatedTime();\r\n        getBusPlateNum();\r\n        const getBusPlateNumInterval = setInterval(getBusPlateNum, 10000);\r\n        const getBusinterval = setInterval(getBusEstimatedTime, 20000);\r\n        getBusStop();\r\n        return () => {\r\n            clearInterval(getBusinterval);\r\n            clearInterval(getBusPlateNumInterval);\r\n        }\r\n    }, []);\r\n\r\n    return ( \r\n        <BusInfoContaienr>\r\n            <TopBar>\r\n                <TopBarContainer>\r\n                    <City>{twCityName}</City>\r\n                    <RouteName>{routeTitle}</RouteName>\r\n                </TopBarContainer>\r\n            </TopBar>\r\n            <Destination>\r\n               <Departure onClick={changeColor} className={ isDeparture ? 'clicked' : 'unclick' } >{roundName.depart}</Departure>\r\n               <Arrow><i className=\"upper-left\"></i><i className=\"lower-left\"></i><i className=\"upper-right\"></i><i className=\"lower-right\"></i></Arrow>\r\n               <Terminal onClick={changeColor} className={ isDeparture ? 'unclick' : 'clicked' } >{roundName.destination}</Terminal>\r\n            </Destination>\r\n            { isDeparture ? \r\n            <DepartureStop \r\n            departStopName={departStopName} \r\n            isBusCome={isBusCome} \r\n            estimateDepart={estimateDepart}\r\n            showBusPlateNumb={showBusPlateNumb}\r\n            departurePlateNum={departurePlateNum}\r\n            /> : \r\n            <ReturnStop \r\n            returnStopName={returnStopName} \r\n            estimateReturn={estimateReturn} \r\n            isBusCome={isBusCome}\r\n            returnPlateNum={returnPlateNum}\r\n            showBusPlateNumb={showBusPlateNumb}\r\n            />\r\n            }\r\n        </BusInfoContaienr>\r\n    );\r\n}\r\n\r\n//去程\r\nconst DepartureStop = ({ departStopName, estimateDepart, isBusCome, showBusPlateNumb, departurePlateNum }) => {\r\n    return(\r\n        <Stops>\r\n                {departStopName.map((stopInfo,index) => (\r\n                        <StopCard key={index}>\r\n                            { estimateDepart.length !== 0 ? isBusCome(stopInfo.stopUID, estimateDepart) : <ArrivalTime background=\"#BDBDBD\">末班駛離</ArrivalTime>}\r\n                            <StopName>{stopInfo.stopName}</StopName>\r\n                            { departurePlateNum.length !== 0 ? showBusPlateNumb(stopInfo.stopSequence,departurePlateNum) : <StopOrder background=\"#F2F2F2\" fontcolor=\"#BDBDBD\">{stopInfo.stopSequence}</StopOrder>}\r\n                            </StopCard>\r\n                ))}\r\n        </Stops>\r\n    )\r\n}\r\n\r\n//回程\r\nconst ReturnStop = ({ returnStopName, estimateReturn, isBusCome, returnPlateNum, showBusPlateNumb}) => {\r\n    return (\r\n        <Stops>\r\n                {returnStopName.map((stopInfo,index) => (\r\n                        <StopCard key={index}>\r\n                            {estimateReturn.length !== 0 ? isBusCome(stopInfo.stopUID, estimateReturn) : <ArrivalTime background=\"#BDBDBD\">末班駛離</ArrivalTime>}\r\n                            <StopName>{stopInfo.stopName}</StopName>\r\n                            {returnPlateNum.length !== 0 ? showBusPlateNumb(stopInfo.stopSequence,returnPlateNum) : <StopOrder background=\"#F2F2F2\" fontcolor=\"#BDBDBD\">{stopInfo.stopSequence}</StopOrder>}\r\n                        </StopCard>\r\n                ))}\r\n        </Stops>\r\n    )\r\n}","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADHSURBVHgBlVLRDYIwFKSEf3UCOwIbyAaOICPoBIwgG6ATOAJu4AjiBLJBvZfciy+IFC65tBzvei+vdYlBCKHA4pNx3J1znX6kxlRjacEGXIlE7qk9UXPUekdTjuVhTzd7n3y76JG6kU1GYQ3W5BQ63WRIk6QTT3tNuVCrczikTFuMdEZ7Q3TgVVsowCrmCNIrkRm9ZP/zwcQb6GVY4RdnuTLwrR59AD2Yk/+G5Uf/4bSLSZD0hmyNXo0ZS1OwjelD847PL6p/AIV3r8qdOKQVAAAAAElFTkSuQmCC\"","import styled, { css } from 'styled-components';\r\nimport { MEDIA_MD, MEDIA_LG } from '../../constants/breakpoint';\r\nimport busIcon from '../../assets/bus-icon.png';\r\n\r\nexport const BusInfoContaienr = styled.div`\r\n    max-width: 411px;\r\n    margin: 0 auto;\r\n    \r\n    ${MEDIA_MD} {\r\n        max-width: 768px;\r\n    }\r\n`;\r\n\r\nexport const TopBarContainer = styled.div`\r\n    width: 411px;\r\n    \r\n    ${MEDIA_MD} {\r\n        width: 768px;\r\n    }\r\n`;\r\n\r\nexport const TopBar = styled.div`\r\n    width: 100%;\r\n    border-radius: 0px 0px 16px 16px;\r\n    background: #6B00FF;\r\n    height: 96px;\r\n    padding: 16px 0 16px 30px;\r\n    position: absolute;\r\n    top: 80px;\r\n    left: 0;\r\n    display: flex;\r\n    justify-content: center;\r\n    \r\n    ${MEDIA_MD} {\r\n        padding-left:7%;\r\n        height: 114px;\r\n    }\r\n\r\n`;\r\n\r\nexport const City = styled.div`\r\n    background: #42EDF0;\r\n    border-radius: 20px;\r\n    font-size: 14px;\r\n    width: 58px;\r\n    height: 20px;\r\n    color: #6B00FF;\r\n    font-weight: bold;\r\n    text-align: center;\r\n    padding-top: 3px;\r\n`;\r\n\r\nexport const RouteName = styled.h2`\r\n    font-size: 28px;\r\n    color: #FFFFFF;\r\n    font-weight: bold;\r\n    position: absolute;\r\n    bottom: 16px;\r\n    \r\n    ${MEDIA_MD} {\r\n        font-size: 36px;\r\n        bottom: 25px;\r\n    }\r\n\r\n`;\r\n\r\nexport const Stops = styled.div`\r\n    margin-top: 30px;\r\n    display:flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    margin-top: 126px;\r\n`;\r\n\r\nexport const StopCard = styled.div`\r\n    width: 349px;\r\n    height: 68px;\r\n    background: #FFFFFF;\r\n    border-radius: 16px;\r\n    padding: 20px 8px;\r\n    position: relative;\r\n    margin-bottom: 12px;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 678px;\r\n        height: 72px;\r\n    }\r\n`;\r\n\r\n\r\nexport const ArrivalTime = styled.div`\r\n    width: 72px;\r\n    height: 28px;\r\n    background: ${props => props.background};\r\n    border-radius: 16px;\r\n    color: #FFFFFF;\r\n    font-size: 14px;\r\n    display: inline-block;\r\n    text-align: center;\r\n    line-height: 28px;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 80px;\r\n        height: 32px;\r\n        line-height: 32px;\r\n        font-size: 16px;\r\n    }\r\n`;\r\n\r\nexport const StopName = styled.div`\r\n    color: #5B4E6E;\r\n    font-size: 16px;\r\n    font-weight: 700;\r\n    margin-left: 8px;\r\n\r\n    ${MEDIA_MD} {\r\n        font-size: 20px;\r\n    }\r\n`;\r\n\r\nexport const DestinationName = styled.span`\r\n        margin-left: 8px;\r\n        font-size: 14px;\r\n        color: #5B4E6E;\r\n\r\n        ${MEDIA_MD} {\r\n            font-size: 16px;\r\n\r\n        }\r\n`;\r\n\r\nexport const StopOrder = styled.div`\r\n    width: 30px;\r\n    height: 24px;\r\n    font-size: 12px;\r\n    background: #F2F2F2;\r\n    border-radius: 16px;\r\n    color: #BDBDBD;\r\n    position: absolute;\r\n    text-align: center;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    top: 20px;\r\n    right: 8px;\r\n\r\n    ${MEDIA_MD} {\r\n        font-size: 14px;\r\n        top: 22px;\r\n    }\r\n`;\r\n\r\nexport const Plate = styled.div`\r\n    width: 80px;\r\n    height: 28px;\r\n    background: #6B00FF;\r\n    box-shadow: 0px 4px 4px rgba(0, 0, 0, 0.25);\r\n    border-radius: 16px;\r\n    font-size: 14px;\r\n    line-height: 28px;\r\n    text-align: end;\r\n    padding: 1px 8px 0 8px;\r\n    color: #FFFFFF;\r\n    position: absolute;\r\n    top: 20px;\r\n    right: 48px;\r\n\r\n    ${MEDIA_MD} {\r\n        width: 86px;\r\n        height: 32px;\r\n        font-size: 16px;\r\n        line-height: 28px;\r\n    }\r\n`;\r\n\r\nexport const BusIcon = styled.img`\r\n    position: absolute;\r\n    left: 9px;\r\n    top: 7px;\r\n\r\n    ${MEDIA_MD} {\r\n        top: 8px;\r\n    }\r\n`;\r\n\r\n","import React, { useState, useEffect } from 'react';\r\nimport { BusInfoContaienr, TopBar, City, RouteName, Stops, StopCard, ArrivalTime, StopName, StopOrder, Plate, BusIcon, DestinationName, TopBarContainer} from './style'\r\nimport busIcon from '../../assets/bus-icon.png';\r\nimport { useParams } from \"react-router\";\r\nimport getRouteUID from '../../constants/utils';\r\nimport getAuthorizationHeader from '../../BusApi/busApi';\r\n\r\nexport const RealTimeStopInfo = ({ twCityName, cityName, roundName, stopUID }) => {\r\n    let { routeTitle } = useParams();\r\n    let routeId = [];\r\n    \r\n    //get 公車預估到站資料\r\n    const [ estimateBusTime, setEstimateBusTime ] = useState([]);\r\n\r\n    const getBusEstimateTime = async() => {\r\n            const estimatedTimeOfArrival = `https://ptx.transportdata.tw/MOTC/v2/Bus/EstimatedTimeOfArrival/City/${cityName}?%24filter=contains(StopUID%2C'${stopUID}')&%24top=30&%24format=JSON`;\r\n            const res = await fetch(estimatedTimeOfArrival, { headers: getAuthorizationHeader() });\r\n            const jsonRes = await res.json();\r\n                setEstimateBusTime([]);\r\n\r\n                setEstimateBusTime(pre => [\r\n                    ...pre,\r\n                    {\r\n                        routeUID: jsonRes.RouteUID,\r\n                        direction: jsonRes.Direction,\r\n                        stopStatus: jsonRes.StopStatus,\r\n                        estimateTime: jsonRes.EstimateTime\r\n                    }\r\n                ])\r\n    }\r\n\r\n    //get 公車routeUID\r\n    const stopOfRoute = `https://ptx.transportdata.tw/MOTC/v2/Bus/StopOfRoute/City/${cityName}?%24select=RouteUID%2CRouteName%2CStops&%24format=JSON`;\r\n \r\n    const getBusRouteUID = async () => {\r\n        const res = await fetch(stopOfRoute, { headers: getAuthorizationHeader() });\r\n        const jsonRes = await res.json();\r\n        //console.log('stopdata', jsonRes);\r\n        \r\n        getRouteUID(jsonRes, stopUID, routeId);\r\n        //console.log(routeId)\r\n        getBusRoute();\r\n    };\r\n\r\n    //以routeUID取得路線名稱\r\n    const [ routeInfo , setRouteInfo ] = useState([]);\r\n\r\n    const getBusRoute = async () => {\r\n        for (let i =0; i < routeId.length; i++) {\r\n            const route = `https://ptx.transportdata.tw/MOTC/v2/Bus/Route/City/${cityName}?%24filter=contains(RouteUID%2C%20'${routeId[i]}')&%24top=30&%24format=JSON`;\r\n\r\n            const res = await fetch(route);\r\n            const jsonRes = await res.json();\r\n\r\n            setRouteInfo( pre => [\r\n                ...pre,\r\n                {\r\n                    routeUID: jsonRes[0].RouteUID,\r\n                    routeName: jsonRes[0].RouteName.Zh_tw,\r\n                    departureStopNameZh: jsonRes[0].DepartureStopNameZh,\r\n                    destinationStopNameZh: jsonRes[0].DestinationStopNameZh\r\n                }\r\n            ]);\r\n        }\r\n        \r\n    }\r\n    \r\n    //判斷公車是否進站\r\n    const isBusCome = (routeUid) => {\r\n        \r\n        //console.log('state', state);\r\n        //console.log('stopInfo', stopInfo);\r\n        \r\n        //在state尋找相同UID的stop資訊，並將此物件放進新的陣列\r\n        const estimateTime = estimateBusTime.filter(item => item.routeUID === routeUid);\r\n        \r\n        if (estimateTime.length === 0) {\r\n           return <ArrivalTime background=\"#BDBDBD\">未發車</ArrivalTime>; \r\n        } else {\r\n           return estimateTime.map(uid => {\r\n            let time = Math.round((uid.estimateTime)/60);\r\n            if (uid.stopStatus === 0 && time > 3) {\r\n                return <ArrivalTime background=\"#00C2BA\">{time}分</ArrivalTime>;\r\n             } else if (uid.stopStatus === 0 && time <= 3) {\r\n                return <ArrivalTime background=\"#EB5757\" >進站中</ArrivalTime>;\r\n             } \r\n             else {\r\n                return  <ArrivalTime background=\"#BDBDBD\">未發車</ArrivalTime>; \r\n             }\r\n            });\r\n        }\r\n       /*<ArrivalTime background=\"#BDBDBD\" >末班駛離</ArrivalTime>;*/\r\n    }\r\n    \r\n    useEffect(() => {\r\n        getBusRouteUID();\r\n        getBusEstimateTime();\r\n        const interval = setInterval(getBusEstimateTime(), 30000)\r\n        return () => {\r\n            clearInterval(interval);\r\n        }\r\n    }, []);\r\n\r\n    return ( \r\n        <BusInfoContaienr>\r\n            <TopBar>\r\n              <TopBarContainer>\r\n                <City>{twCityName}</City>\r\n                <RouteName>{routeTitle}</RouteName>\r\n              </TopBarContainer>\r\n            </TopBar>\r\n            <Stops>\r\n                {routeInfo.map(info => (\r\n                        <StopCard>\r\n                            {estimateBusTime !== [] ? isBusCome(info.routeUID) : <ArrivalTime background=\"#BDBDBD\" >末班駛離</ArrivalTime>}\r\n                            <StopName>{info.routeName}<DestinationName>&gt;{info.destinationStopNameZh}</DestinationName></StopName>\r\n                            {/*<StopOrder>{stopInfo.stopSequence}</StopOrder>*/}\r\n                            {/*<Plate><BusIcon src={busIcon}></BusIcon>249-FY</Plate>*/}\r\n                        </StopCard>\r\n                ))}\r\n            </Stops>\r\n        </BusInfoContaienr>\r\n    );\r\n}\r\n","\nimport './App.css';\nimport { ResetStyle, GlobalStyle } from './components/globalstyle';\nimport { NavBar } from './components/NavBar/NavBar';\nimport { FindBus } from './components/FindBus/FindBus';\nimport { RealTimeBusInfo } from './components/RealTimeBusInfo/RealTimeBusInfo';\nimport { RealTimeStopInfo } from './components/RealTimeStopInfo/RealTimeStopInfo';\nimport React, { useState } from 'react';\nimport { HashRouter as Router, Routes, Route } from 'react-router-dom';\n\n\nfunction App() {\n     //中文站名\n    const [ twCityName, setTwCityName ] = useState('');\n    \n    //城市\n    const [ cityName, setCityName ] = useState('');\n    \n    //路線資料\n    const [ routeUID, setRouteUID ] = useState('');\n    const [ roundName, setRoundName ] = useState([]);\n    const [ stopUID, setStopUID] = useState('');\n\n    return (\n    <div>\n      <Router>\n        <ResetStyle />\n        <GlobalStyle />\n        <NavBar />\n        <Routes>\n          <Route exact path=\"/\" element={\n            <FindBus\n            routeUID={routeUID}\n            cityName={cityName}\n            setCityName={setCityName}\n            twCityName={twCityName}\n            setTwCityName={setTwCityName}\n            setRouteUID={setRouteUID}\n            setRoundName={setRoundName}\n            setStopUID={setStopUID}\n            />\n          } />\n          <Route exact path=\"/busroute/:routeTitle\" element={\n            <RealTimeBusInfo \n            twCityName={twCityName}\n            cityName={cityName}\n            routeUID={routeUID}\n            roundName={roundName}\n            />\n          } />\n          <Route exact path=\"/busstop/:routeTitle\" element={\n            <RealTimeStopInfo \n            twCityName={twCityName}\n            cityName={cityName}\n            stopUID={stopUID}\n            />\n          }/>\n        </Routes>\n      </Router>\n    </div>\n    );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}